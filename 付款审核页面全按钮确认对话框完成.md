# 付款审核页面全按钮确认对话框完成

## 🎯 **修改内容**
为付款审核页面的所有按钮添加确认对话框，确保用户在执行重要操作前进行二次确认。

## ✅ **已添加确认对话框的按钮**

### **1. 审批相关按钮**
- ✅ **单个审批按钮**：点击时弹出确认对话框
- ✅ **批量审批按钮**：点击时弹出确认对话框
- ✅ **取消审批按钮**：点击时弹出确认对话框

### **2. 作废相关按钮**
- ✅ **一键作废按钮**：点击时弹出确认对话框

## 🔧 **技术实现**

### **新增的确认函数**
```typescript
// 单个审批确认
const handleApprovalWithConfirm = (e: any, req: PaymentRequest) => {
  const confirmDialog = window.confirm(`确定要审批付款申请 ${req.request_id} 吗？此操作不可撤销。`);
  if (confirmDialog) {
    handleApproval(e, req);
  }
};

// 批量审批确认
const handleBatchApproveWithConfirm = () => {
  const selectedCount = selection.selectedIds.size;
  const confirmDialog = window.confirm(`确定要审批选中的 ${selectedCount} 个付款申请吗？此操作不可撤销。`);
  if (confirmDialog) {
    handleBatchApprove();
  }
};

// 取消审批确认
const handleRollbackApprovalWithConfirm = (requestId: string) => {
  const confirmDialog = window.confirm(`确定要取消审批付款申请 ${requestId} 吗？此操作将把申请单状态回滚为待审批。`);
  if (confirmDialog) {
    handleRollbackApproval(requestId);
  }
};

// 批量作废确认
const handleCancelRequestsWithConfirm = () => {
  const selectedCount = selection.selectedIds.size;
  const confirmDialog = window.confirm(`确定要作废选中的 ${selectedCount} 个付款申请吗？此操作不可撤销，所有关联运单的状态将恢复为未支付。`);
  if (confirmDialog) {
    handleCancelRequests();
  }
};
```

### **UI更新**
```typescript
// 审批按钮 - 带确认
<Button 
  variant="destructive" 
  size="sm" 
  onClick={(e) => handleApprovalWithConfirm(e, req)} 
  disabled={exportingId === req.id}
  className="bg-red-600 hover:bg-red-700 text-white border-0 shadow-sm font-medium transition-all duration-200"
>
  <ClipboardList className="mr-2 h-4 w-4" />
  审批
</Button>

// 批量审批按钮 - 带确认
<Button
  variant="destructive"
  size="sm"
  onClick={handleBatchApproveWithConfirm}
  disabled={isBatchOperating}
  className="flex items-center gap-2"
>
  {batchOperation === 'approve' ? <Loader2 className="h-4 w-4 animate-spin" /> : <ClipboardList className="h-4 w-4" />}
  批量审批
</Button>

// 取消审批按钮 - 带确认
<Button 
  variant="outline" 
  size="sm" 
  onClick={() => handleRollbackApprovalWithConfirm(req.request_id)} 
  disabled={exportingId === req.id}
  className="border-gray-300 text-gray-600 hover:bg-gray-50 shadow-sm transition-all duration-200"
>
  <RotateCcw className="mr-2 h-4 w-4" />
  取消审批
</Button>

// 一键作废按钮 - 带确认
<Button 
  variant="destructive" 
  disabled={selectionCount === 0 || isCancelling} 
  onClick={handleCancelRequestsWithConfirm}
  className="flex items-center gap-2"
>
  {isCancelling ? <Loader2 className="h-4 w-4 animate-spin" /> : <Trash2 className="h-4 w-4" />}
  一键作废 ({selectionCount})
</Button>
```

## 📋 **确认对话框内容**

### **1. 单个审批确认**
- **提示内容**：`确定要审批付款申请 {request_id} 吗？此操作不可撤销。`
- **操作**：审批单个付款申请

### **2. 批量审批确认**
- **提示内容**：`确定要审批选中的 {selectedCount} 个付款申请吗？此操作不可撤销。`
- **操作**：批量审批选中的付款申请

### **3. 取消审批确认**
- **提示内容**：`确定要取消审批付款申请 {request_id} 吗？此操作将把申请单状态回滚为待审批。`
- **操作**：取消已审批的付款申请

### **4. 批量作废确认**
- **提示内容**：`确定要作废选中的 {selectedCount} 个付款申请吗？此操作不可撤销，所有关联运单的状态将恢复为未支付。`
- **操作**：批量作废选中的付款申请

## 🎉 **完成状态**

### **所有按钮现在都有确认对话框**
- ✅ **审批按钮**：红色背景 + 确认对话框
- ✅ **批量审批按钮**：红色背景 + 确认对话框
- ✅ **取消审批按钮**：灰色背景 + 确认对话框
- ✅ **一键作废按钮**：红色背景 + 确认对话框
- ✅ **查看申请单按钮**：蓝色背景（无需确认，只查看）

### **用户体验提升**
- 🛡️ **防误操作**：所有重要操作都需要二次确认
- 📝 **清晰提示**：每个确认对话框都有明确的操作说明
- ⚠️ **风险提醒**：明确告知用户操作不可撤销
- 🎯 **操作明确**：用户清楚知道将要执行什么操作

**付款审核页面的所有按钮现在都配备了确认对话框，确保用户在执行重要操作前进行二次确认！** 🚀
