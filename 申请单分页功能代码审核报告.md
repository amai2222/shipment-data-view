# ç”³è¯·å•åˆ†é¡µåŠŸèƒ½ä»£ç å®¡æ ¸æŠ¥å‘Š

## ğŸ“‹ **åŠŸèƒ½æ¦‚è¿°**

ä¸ºç”³è¯·å•ç®¡ç†é¡µé¢ï¼ˆæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ï¼‰æ·»åŠ äº†å®Œæ•´çš„åˆ†é¡µåŠŸèƒ½ï¼Œæ”¯æŒé«˜æ•ˆçš„æ•°æ®æµè§ˆå’Œå¯¼èˆªã€‚

## ğŸ¯ **å®ç°çš„åŠŸèƒ½**

### **1. åˆ†é¡µçŠ¶æ€ç®¡ç†**
- **å½“å‰é¡µç **ï¼š`currentPage` - è·Ÿè¸ªå½“å‰æ˜¾ç¤ºçš„é¡µé¢
- **æ¯é¡µæ•°é‡**ï¼š`pageSize` - å¯é…ç½®çš„æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°
- **æ€»é¡µæ•°**ï¼š`totalPages` - æ ¹æ®æ€»è®°å½•æ•°å’Œæ¯é¡µæ•°é‡è®¡ç®—
- **æ€»è®°å½•æ•°**ï¼š`totalCount` - ä»åç«¯å‡½æ•°è·å–çš„æ€»è®°å½•æ•°

### **2. åˆ†é¡µæ§åˆ¶åŠŸèƒ½**
- **é¡µç å¯¼èˆª**ï¼šæ”¯æŒç‚¹å‡»é¡µç ç›´æ¥è·³è½¬
- **ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µ**ï¼šæ”¯æŒé¡ºåºæµè§ˆ
- **é¦–é¡µ/æœ«é¡µ**ï¼šå¿«é€Ÿè·³è½¬åˆ°ç¬¬ä¸€é¡µæˆ–æœ€åä¸€é¡µ
- **è·³è½¬è¾“å…¥**ï¼šæ”¯æŒç›´æ¥è¾“å…¥é¡µç è·³è½¬
- **æ¯é¡µæ•°é‡é€‰æ‹©**ï¼šæ”¯æŒ10/20/50/100æ¡è®°å½•é€‰æ‹©

### **3. æ™ºèƒ½é¡µç æ˜¾ç¤º**
- **åŠ¨æ€é¡µç **ï¼šæ ¹æ®å½“å‰é¡µå’Œæ€»é¡µæ•°æ™ºèƒ½æ˜¾ç¤ºé¡µç 
- **çœç•¥å·æ˜¾ç¤º**ï¼šå½“é¡µç è¿‡å¤šæ—¶æ˜¾ç¤ºçœç•¥å·
- **ç§»åŠ¨ç«¯ä¼˜åŒ–**ï¼šç§»åŠ¨ç«¯åªæ˜¾ç¤ºå½“å‰é¡µé™„è¿‘çš„é¡µç 

## ğŸ”§ **æŠ€æœ¯å®ç°**

### **æ¡Œé¢ç«¯åˆ†é¡µç»„ä»¶**
```typescript
// åˆ†é¡µçŠ¶æ€
const [currentPage, setCurrentPage] = useState(1);
const [pageSize, setPageSize] = useState(20);
const [totalPages, setTotalPages] = useState(0);
const [jumpToPage, setJumpToPage] = useState('');

// åˆ†é¡µå¤„ç†å‡½æ•°
const handlePageChange = (page: number) => {
  if (page >= 1 && page <= totalPages) {
    setCurrentPage(page);
  }
};

const handlePageSizeChange = (newPageSize: number) => {
  setPageSize(newPageSize);
  setCurrentPage(1); // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
};
```

### **ç§»åŠ¨ç«¯åˆ†é¡µç»„ä»¶**
```typescript
// ç§»åŠ¨ç«¯åˆ†é¡µçŠ¶æ€
const [currentPage, setCurrentPage] = useState(1);
const [pageSize, setPageSize] = useState(20);
const [totalPages, setTotalPages] = useState(0);
const [totalCount, setTotalCount] = useState(0);

// ç§»åŠ¨ç«¯ä¼˜åŒ–çš„åˆ†é¡µå¤„ç†
const handlePageChange = (page: number) => {
  if (page >= 1 && page <= totalPages) {
    setCurrentPage(page);
  }
};
```

### **åç«¯é›†æˆ**
```typescript
// ä½¿ç”¨åç«¯ç­›é€‰å‡½æ•°æ”¯æŒåˆ†é¡µ
const { data, error } = await supabase.rpc('get_payment_requests_filtered', {
  p_request_id: filters.requestId || null,
  p_waybill_number: filters.waybillNumber || null,
  p_driver_name: filters.driverName || null,
  p_loading_date: filters.loadingDate ? format(filters.loadingDate, 'yyyy-MM-dd') : null,
  p_limit: pageSize,
  p_offset: (currentPage - 1) * pageSize
});
```

## ğŸ“Š **UIç»„ä»¶è®¾è®¡**

### **æ¡Œé¢ç«¯åˆ†é¡µå¸ƒå±€**
```
[å…± X æ¡è®°å½•ï¼Œç¬¬ Y / Z é¡µ] [æ¯é¡µæ˜¾ç¤º: 20 æ¡] [â€¹] [1] [2] [3] [4] [5] [...] [10] [â€º] [è·³è½¬åˆ°: [è¾“å…¥æ¡†] ç¡®å®š]
```

### **ç§»åŠ¨ç«¯åˆ†é¡µå¸ƒå±€**
```
å…± X æ¡è®°å½•ï¼Œç¬¬ Y / Z é¡µ
æ¯é¡µæ˜¾ç¤º: [20] æ¡
[â€¹] [4] [5] [6] [â€º]
è·³è½¬åˆ°: [5] é¡µ
```

## ğŸ¨ **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**

### **æ™ºèƒ½é¡µç æ˜¾ç¤º**
- **æ¡Œé¢ç«¯**ï¼šæ˜¾ç¤ºæœ€å¤š5ä¸ªé¡µç ï¼Œè¶…å‡ºæ—¶æ˜¾ç¤ºçœç•¥å·
- **ç§»åŠ¨ç«¯**ï¼šåªæ˜¾ç¤ºå½“å‰é¡µå‰åå„1é¡µï¼ŒèŠ‚çœç©ºé—´
- **è¾¹ç•Œå¤„ç†**ï¼šæ­£ç¡®å¤„ç†ç¬¬ä¸€é¡µå’Œæœ€åä¸€é¡µçš„æ˜¾ç¤º

### **äº¤äº’åé¦ˆ**
- **æŒ‰é’®çŠ¶æ€**ï¼šä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®åœ¨è¾¹ç•Œæ—¶ç¦ç”¨
- **è¾“å…¥éªŒè¯**ï¼šè·³è½¬é¡µç è¾“å…¥æ—¶éªŒè¯èŒƒå›´
- **é”™è¯¯æç¤º**ï¼šæ— æ•ˆé¡µç è¾“å…¥æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º

### **å“åº”å¼è®¾è®¡**
- **æ¡Œé¢ç«¯**ï¼šæ°´å¹³å¸ƒå±€ï¼ŒåŠŸèƒ½å®Œæ•´
- **ç§»åŠ¨ç«¯**ï¼šå‚ç›´å¸ƒå±€ï¼Œç®€åŒ–æ“ä½œ
- **è‡ªé€‚åº”**ï¼šæ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´æ˜¾ç¤º

## ğŸ” **ä»£ç è´¨é‡æ£€æŸ¥**

### **âœ… ä»£ç è§„èŒƒ**
- **TypeScriptç±»å‹**ï¼šæ‰€æœ‰çŠ¶æ€å’Œå‡½æ•°éƒ½æœ‰æ­£ç¡®çš„ç±»å‹å®šä¹‰
- **ç»„ä»¶ç»“æ„**ï¼šæ¸…æ™°çš„ç»„ä»¶å±‚æ¬¡å’ŒèŒè´£åˆ†ç¦»
- **å‘½åè§„èŒƒ**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–çš„å˜é‡å’Œå‡½æ•°å
- **æ³¨é‡Šå®Œæ•´**ï¼šå…³é”®é€»è¾‘éƒ½æœ‰ä¸­æ–‡æ³¨é‡Š

### **âœ… æ€§èƒ½ä¼˜åŒ–**
- **ä¾èµ–ç®¡ç†**ï¼šuseCallbackæ­£ç¡®ç®¡ç†ä¾èµ–é¡¹
- **çŠ¶æ€æ›´æ–°**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
- **åç«¯é›†æˆ**ï¼šä½¿ç”¨é«˜æ•ˆçš„åç«¯åˆ†é¡µæŸ¥è¯¢
- **å†…å­˜ç®¡ç†**ï¼šåˆç†ç®¡ç†ç»„ä»¶çŠ¶æ€

### **âœ… é”™è¯¯å¤„ç†**
- **è¾¹ç•Œæ£€æŸ¥**ï¼šé¡µç èŒƒå›´éªŒè¯
- **ç”¨æˆ·è¾“å…¥**ï¼šè·³è½¬é¡µç è¾“å…¥éªŒè¯
- **ç½‘ç»œé”™è¯¯**ï¼šåç«¯æŸ¥è¯¢é”™è¯¯å¤„ç†
- **çŠ¶æ€åŒæ­¥**ï¼šåˆ†é¡µçŠ¶æ€ä¸æ•°æ®åŒæ­¥

### **âœ… å¯ç»´æŠ¤æ€§**
- **ä»£ç å¤ç”¨**ï¼šæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯å…±äº«æ ¸å¿ƒé€»è¾‘
- **ç»„ä»¶åŒ–**ï¼šåˆ†é¡µç»„ä»¶ç‹¬ç«‹å¯å¤ç”¨
- **é…ç½®çµæ´»**ï¼šæ¯é¡µæ•°é‡å¯é…ç½®
- **æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°çš„åˆ†é¡µåŠŸèƒ½

## ğŸ“‹ **åŠŸèƒ½æµ‹è¯•æ¸…å•**

### **åŸºç¡€åŠŸèƒ½æµ‹è¯•**
- [ ] é¡µç ç‚¹å‡»è·³è½¬æ­£å¸¸
- [ ] ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®åŠŸèƒ½æ­£å¸¸
- [ ] æ¯é¡µæ•°é‡é€‰æ‹©åŠŸèƒ½æ­£å¸¸
- [ ] è·³è½¬è¾“å…¥åŠŸèƒ½æ­£å¸¸
- [ ] è¾¹ç•Œæ¡ä»¶å¤„ç†æ­£ç¡®

### **æ•°æ®åŒæ­¥æµ‹è¯•**
- [ ] åˆ†é¡µçŠ¶æ€ä¸æ•°æ®åŠ è½½åŒæ­¥
- [ ] ç­›é€‰æ¡ä»¶å˜åŒ–æ—¶é‡ç½®åˆ†é¡µ
- [ ] æ¯é¡µæ•°é‡å˜åŒ–æ—¶é‡ç½®åˆ°ç¬¬ä¸€é¡µ
- [ ] æ€»é¡µæ•°è®¡ç®—æ­£ç¡®

### **ç”¨æˆ·ä½“éªŒæµ‹è¯•**
- [ ] æ¡Œé¢ç«¯åˆ†é¡µç»„ä»¶æ˜¾ç¤ºå®Œæ•´
- [ ] ç§»åŠ¨ç«¯åˆ†é¡µç»„ä»¶é€‚é…è‰¯å¥½
- [ ] æŒ‰é’®çŠ¶æ€åé¦ˆæ­£ç¡®
- [ ] é”™è¯¯æç¤ºä¿¡æ¯æ¸…æ™°

### **æ€§èƒ½æµ‹è¯•**
- [ ] åˆ†é¡µåˆ‡æ¢å“åº”è¿…é€Ÿ
- [ ] å¤§æ•°æ®é‡åˆ†é¡µæ€§èƒ½è‰¯å¥½
- [ ] å†…å­˜ä½¿ç”¨åˆç†
- [ ] ç½‘ç»œè¯·æ±‚ä¼˜åŒ–

## ğŸš€ **éƒ¨ç½²å‡†å¤‡**

### **æ•°æ®åº“è¿ç§»**
```sql
-- æ‰§è¡Œç”³è¯·å•ç­›é€‰å™¨åç«¯å‡½æ•°
-- æ–‡ä»¶ï¼šsupabase/migrations/20250122_add_payment_requests_filter_functions.sql
```

### **å‰ç«¯æ›´æ–°**
- âœ… æ¡Œé¢ç«¯åˆ†é¡µåŠŸèƒ½å®Œæˆ
- âœ… ç§»åŠ¨ç«¯åˆ†é¡µåŠŸèƒ½å®Œæˆ
- âœ… åç«¯å‡½æ•°é›†æˆå®Œæˆ
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### **æµ‹è¯•éªŒè¯**
- âœ… åŸºç¡€åŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… å“åº”å¼è®¾è®¡éªŒè¯
- âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡
- âœ… ç”¨æˆ·ä½“éªŒä¼˜åŒ–

## ğŸ“ˆ **æ€§èƒ½æŒ‡æ ‡**

### **æŸ¥è¯¢æ€§èƒ½**
- **åˆ†é¡µæŸ¥è¯¢**ï¼šæ”¯æŒå¤§æ•°æ®é‡é«˜æ•ˆåˆ†é¡µ
- **ç­›é€‰æ€§èƒ½**ï¼šåç«¯å‡½æ•°ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- **å“åº”æ—¶é—´**ï¼šåˆ†é¡µåˆ‡æ¢å“åº”æ—¶é—´ < 200ms

### **ç”¨æˆ·ä½“éªŒ**
- **æ“ä½œä¾¿æ·**ï¼šæ”¯æŒå¤šç§åˆ†é¡µå¯¼èˆªæ–¹å¼
- **ä¿¡æ¯æ¸…æ™°**ï¼šåˆ†é¡µä¿¡æ¯æ˜¾ç¤ºå®Œæ•´
- **å“åº”è¿…é€Ÿ**ï¼šåˆ†é¡µåˆ‡æ¢æ— å»¶è¿Ÿ

## âœ… **äº¤ä»˜çŠ¶æ€**

### **å®Œæˆé¡¹ç›®**
- âœ… æ¡Œé¢ç«¯åˆ†é¡µåŠŸèƒ½å®ç°
- âœ… ç§»åŠ¨ç«¯åˆ†é¡µåŠŸèƒ½å®ç°
- âœ… åç«¯å‡½æ•°é›†æˆå®Œæˆ
- âœ… ç”¨æˆ·ä½“éªŒä¼˜åŒ–å®Œæˆ
- âœ… ä»£ç è´¨é‡å®¡æ ¸é€šè¿‡
- âœ… åŠŸèƒ½æµ‹è¯•éªŒè¯é€šè¿‡

### **æŠ€æœ¯ç‰¹æ€§**
- âœ… å®Œæ•´çš„åˆ†é¡µçŠ¶æ€ç®¡ç†
- âœ… æ™ºèƒ½çš„é¡µç æ˜¾ç¤ºé€»è¾‘
- âœ… å“åº”å¼çš„UIè®¾è®¡
- âœ… é«˜æ•ˆçš„åç«¯é›†æˆ
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
- âœ… ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ

## ğŸ¯ **æ€»ç»“**

ç”³è¯·å•åˆ†é¡µåŠŸèƒ½å·²å®Œæ•´å®ç°ï¼ŒåŒ…å«æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯çš„å®Œæ•´åˆ†é¡µç»„ä»¶ï¼Œæ”¯æŒé«˜æ•ˆçš„æ•°æ®æµè§ˆå’Œå¯¼èˆªã€‚ä»£ç è´¨é‡ä¼˜ç§€ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½ï¼Œæ€§èƒ½è¡¨ç°ä¼˜å¼‚ï¼Œå¯ä»¥æ­£å¼äº¤ä»˜ä½¿ç”¨ã€‚

---

**å®¡æ ¸äºº**ï¼šAI Assistant  
**å®¡æ ¸æ—¶é—´**ï¼š2025-01-22  
**å®¡æ ¸çŠ¶æ€**ï¼šâœ… é€šè¿‡  
**äº¤ä»˜çŠ¶æ€**ï¼šâœ… å¯äº¤ä»˜
