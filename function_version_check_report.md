# å‰ç«¯å‡½æ•°ç‰ˆæœ¬æ£€æŸ¥æŠ¥å‘Š

## âœ… å·²ç¡®è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„å‡½æ•°

### 1. batch_recalculate_by_filter
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**: 
  - `src/pages/FinanceReconciliation.tsx:737` âœ…

### 2. get_all_filtered_record_ids
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/BusinessEntry/hooks/useAllFilteredRecords.ts:28` âœ…

### 3. get_filtered_unpaid_ids
- **æœ€æ–°ç‰ˆæœ¬**: `_1122`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/PaymentRequest.tsx:518` âœ…

### 4. get_finance_reconciliation_by_partner
- **æœ€æ–°ç‰ˆæœ¬**: `_1122`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/FinanceReconciliation.tsx:257` âœ…
  - `src/pages/FinanceReconciliation.tsx:941` âœ…

### 5. get_invoice_request_data
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/InvoiceRequest.tsx:266` âœ…
  - `src/pages/InvoiceRequest.tsx:480` âœ…

### 6. get_invoice_requests_filtered
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/InvoiceAudit.tsx:248` âœ…
  - `src/pages/InvoiceRequestManagement.tsx:261` âœ…
  - `src/pages/PaymentInvoice.tsx:290` âœ…
  - `src/pages/mobile/shipper/MobileShipperHome.tsx:92` âœ…
  - `src/pages/mobile/shipper/MobileShipperSubmitReceipt.tsx:52` âœ…
  - `src/components/mobile/ShipperMobileLayout.tsx:118` âœ…
  - `src/pages/mobile/shipper/MobileShipperPendingPayments.tsx:56` âœ…
  - `src/pages/mobile/shipper/MobileShipperWaybills.tsx:41` âœ…

### 7. get_logistics_summary_and_records_enhanced
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/BusinessEntry/index.tsx:184` âœ…
  - `src/pages/BusinessEntry/hooks/useLogisticsData.ts:107` âœ…

### 8. get_payment_request_data
- **æœ€æ–°ç‰ˆæœ¬**: `_1122`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/PaymentRequest.tsx:297` âœ…
- **æ³¨æ„**: è¿˜æœ‰ `get_payment_request_data_v2_1122` ä¹Ÿåœ¨ä½¿ç”¨ï¼ˆè¿™æ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ˜¯æ¸…ç†ç›®æ ‡ï¼‰

### 9. get_payment_requests_filtered
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/PaymentAudit.tsx:214` âœ…
  - `src/pages/PaymentRequestsList.tsx:131` âœ…
  - `src/pages/mobile/MobilePaymentRequestsList.tsx:194` âœ…

### 10. get_shipper_dashboard_stats
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/mobile/MobileShipperDashboard.tsx:173` âœ…
  - `src/pages/ShipperDashboard.tsx:203` âœ…

### 11. get_subordinate_shippers_stats
- **æœ€æ–°ç‰ˆæœ¬**: `_1120`
- **ä½¿ç”¨ä½ç½®**:
  - `src/pages/mobile/MobileShipperDashboard.tsx:188` âœ…
  - `src/pages/ShipperDashboard.tsx:233` âœ…

## âš ï¸ å…¶ä»–å‡½æ•°ï¼ˆä¸åœ¨æ¸…ç†åˆ—è¡¨ä¸­ï¼‰

ä»¥ä¸‹å‡½æ•°ä½¿ç”¨äº†å¸¦åç¼€çš„ç‰ˆæœ¬ï¼Œä½†ä¸åœ¨æœ¬æ¬¡æ¸…ç†åˆ—è¡¨ä¸­ï¼š

1. `get_dashboard_stats_with_billing_types_1113`
   - ä½¿ç”¨ä½ç½®:
     - `src/utils/supabase.ts:167`
     - `src/pages/Home.tsx:101`
     - `src/pages/mobile/MobileHome.tsx:110,159`
   - **çŠ¶æ€**: ä¸åœ¨æ¸…ç†åˆ—è¡¨ä¸­ï¼Œå¯èƒ½æ˜¯å…¶ä»–å‡½æ•°

2. `get_payment_request_data_v2_1122`
   - ä½¿ç”¨ä½ç½®: å¤šå¤„
   - **çŠ¶æ€**: è¿™æ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼ˆv2ç‰ˆæœ¬ï¼‰ï¼Œä¸åœ¨æ¸…ç†åˆ—è¡¨ä¸­

## ğŸ“Š æ€»ç»“

âœ… **æ‰€æœ‰éœ€è¦æ¸…ç†çš„å‡½æ•°éƒ½å·²ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼**

- 11ä¸ªç›®æ ‡å‡½æ•°å…¨éƒ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
- æ²¡æœ‰å‘ç°ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼ˆ_1113, _1114, _1115, _1116ï¼‰çš„æƒ…å†µ
- æ²¡æœ‰å‘ç°ä½¿ç”¨åŸå‡½æ•°åï¼ˆæ— åç¼€ï¼‰çš„æƒ…å†µ

## ğŸ¯ å»ºè®®

1. âœ… å‰ç«¯ä»£ç å·²ç»å…¨éƒ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥å®‰å…¨æ‰§è¡Œæ¸…ç†è¿ç§»
2. âœ… æ‰§è¡Œ `20251123_cleanup_old_function_versions.sql` åï¼Œå‰ç«¯ä¸ä¼šå—åˆ°å½±å“
3. âš ï¸ æ³¨æ„ï¼š`get_dashboard_stats_with_billing_types_1113` ä¸åœ¨æ¸…ç†åˆ—è¡¨ä¸­ï¼Œå¦‚æœåç»­éœ€è¦æ¸…ç†ï¼Œéœ€è¦å•ç‹¬å¤„ç†

