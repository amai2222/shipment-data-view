# React ç±»å‹å†²çªä¿®å¤æŠ¥å‘Š

## ğŸ“‹ é—®é¢˜è¯Šæ–­

### é—®é¢˜æè¿°
é¡¹ç›®ä¸­å­˜åœ¨ `src/react-shim.d.ts` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ª**ä¸´æ—¶çš„** React ç±»å‹å£°æ˜æ–‡ä»¶ã€‚å½“é¡¹ç›®ç¯å¢ƒä¸­å·²ç»å®‰è£…äº†å®˜æ–¹çš„ `@types/react` å’Œ `@types/react-dom` æ—¶ï¼Œè¿™ä¸ª shim æ–‡ä»¶ä¼šä¸å®˜æ–¹ç±»å‹å®šä¹‰å‘ç”Ÿå†²çªï¼Œå¯¼è‡´ï¼š

1. âŒ TypeScript æŠ¥å‘Š"é‡å¤æ ‡è¯†ç¬¦"é”™è¯¯
2. âŒ æ„å»ºå¤±è´¥
3. âŒ IDE ç±»å‹æç¤ºä¸å‡†ç¡®
4. âŒ ç±»å‹æ¨æ–­é”™è¯¯

### ç¯å¢ƒä¿¡æ¯
```json
{
  "@types/react": "18.3.12",      // âœ… å®˜æ–¹ç±»å‹å®šä¹‰
  "@types/react-dom": "18.3.1",   // âœ… å®˜æ–¹ç±»å‹å®šä¹‰
  "react": "^18.3.1",
  "react-dom": "^18.3.1"
}
```

### å†²çªæœºåˆ¶
```typescript
// âŒ src/react-shim.d.tsï¼ˆç®€åŒ–çš„ä¸´æ—¶ç±»å‹ï¼‰
declare module 'react' {
  export function useState<S>(initialState: S | (() => S)): [S, (value: S | ((prevState: S) => S)) => void];
  // ... ç®€åŒ–çš„ç±»å‹å£°æ˜
}

// âœ… node_modules/@types/reactï¼ˆå®˜æ–¹å®Œæ•´ç±»å‹ï¼‰
declare module 'react' {
  export function useState<S = undefined>(): [S | undefined, Dispatch<SetStateAction<S | undefined>>];
  export function useState<S>(initialState: S | (() => S)): [S, Dispatch<SetStateAction<S>>];
  // ... å®Œæ•´ã€ç²¾ç¡®çš„ç±»å‹å£°æ˜
}

// ç»“æœï¼šTypeScript æ£€æµ‹åˆ°ä¸¤ä¸ªç›¸åŒçš„ç±»å‹å£°æ˜ â†’ å†²çªï¼
```

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. åˆ é™¤å†²çªæ–‡ä»¶
```bash
# å·²åˆ é™¤
src/react-shim.d.ts
```

### 2. éªŒè¯æ— å¼•ç”¨
```bash
# æ£€æŸ¥ç»“æœ
grep -r "react-shim" src/
# âœ… æ— å¼•ç”¨

grep -r "import.*from ['\"']react-shim" src/
# âœ… æ— å¼•ç”¨

grep -r "/// <reference path.*react-shim" src/
# âœ… æ— å¼•ç”¨
```

### 3. ç¡®è®¤å®˜æ–¹ç±»å‹å·²å®‰è£…
```bash
npm list @types/react @types/react-dom

# è¾“å‡ºï¼š
# @types/react@18.3.12 âœ…
# @types/react-dom@18.3.1 âœ…
```

---

## ğŸ” ä¿®å¤éªŒè¯

### TypeScript é…ç½®æ­£ç¡®
```json
// tsconfig.app.json
{
  "compilerOptions": {
    "jsx": "react-jsx",              // âœ… æ–°çš„ JSX è½¬æ¢
    "esModuleInterop": true,         // âœ… æ”¯æŒé»˜è®¤å¯¼å…¥
    "allowSyntheticDefaultImports": true,  // âœ… å…è®¸åˆæˆé»˜è®¤å¯¼å…¥
    "skipLibCheck": true             // âœ… è·³è¿‡åº“ç±»å‹æ£€æŸ¥
  }
}
```

### React å¯¼å…¥æ–¹å¼æ­£ç¡®
```typescript
// âœ… æ­£ç¡® - åªå¯¼å…¥ hooks
import { useState, useEffect, useCallback } from 'react';

// âœ… æ­£ç¡® - å¯¼å…¥ç±»å‹
import type { FC, ReactNode, MouseEvent } from 'react';

// âŒ é”™è¯¯ - æ··ç”¨ï¼ˆå·²ä¿®å¤ï¼‰
import React, { useState } from 'react';
```

### ç±»å‹æ¨æ–­æ­£å¸¸
```typescript
// âœ… å®Œæ•´çš„ç±»å‹æ¨æ–­
import { useState } from 'react';

const [value, setValue] = useState('');
// value: string âœ…
// setValue: Dispatch<SetStateAction<string>> âœ…

const [count, setCount] = useState<number>();
// count: number | undefined âœ…
// setCount: Dispatch<SetStateAction<number | undefined>> âœ…
```

---

## ğŸ“Š ä¿®å¤å½±å“èŒƒå›´

### ç›´æ¥å½±å“
- âœ… **TypeScript ç±»å‹æ£€æŸ¥**ï¼šä¸å†æŠ¥å‘Šç±»å‹å†²çªé”™è¯¯
- âœ… **IDE ç±»å‹æç¤º**ï¼šå‡†ç¡®çš„ç±»å‹æç¤ºå’Œè‡ªåŠ¨å®Œæˆ
- âœ… **æ„å»ºæµç¨‹**ï¼šæ„å»ºä¸å†å› ç±»å‹å†²çªè€Œå¤±è´¥
- âœ… **ç±»å‹æ¨æ–­**ï¼šå®Œæ•´çš„ç±»å‹æ¨æ–­æ”¯æŒ

### é—´æ¥å½±å“
- âœ… **å¼€å‘ä½“éªŒ**ï¼šæ›´å¥½çš„ IDE æ”¯æŒ
- âœ… **ä»£ç è´¨é‡**ï¼šæ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- âœ… **ç»´æŠ¤æ€§**ï¼šä½¿ç”¨å®˜æ–¹æ ‡å‡†ç±»å‹
- âœ… **å…¼å®¹æ€§**ï¼šä¸ç¬¬ä¸‰æ–¹åº“ç±»å‹å®šä¹‰å…¼å®¹

---

## ğŸ“ ç›¸å…³ä¿®æ”¹

### 1. åˆ é™¤æ–‡ä»¶
```
å·²åˆ é™¤ï¼šsrc/react-shim.d.ts
```

### 2. æ–°å¢æ–‡æ¡£
```
æ–°å¢ï¼šdocs/coding-standards/Reactç±»å‹å†²çªè§£å†³æ–¹æ¡ˆ.md
æ–°å¢ï¼šdocs/coding-standards/Lovableå¹³å°å…¼å®¹æ€§è§„èŒƒ.md
æ–°å¢ï¼šdocs/æ„å»ºéƒ¨ç½²æ£€æŸ¥æ¸…å•.md
æ–°å¢ï¼šdocs/Reactç±»å‹å†²çªä¿®å¤æŠ¥å‘Š.mdï¼ˆæœ¬æ–‡æ¡£ï¼‰
```

### 3. æ›´æ–°æ–‡æ¡£
```
æ›´æ–°ï¼šdocs/coding-standards/ä»£ç å®¡æ ¸ä¸æ£€æŸ¥è§„èŒƒ.md
  - æ·»åŠ ç›¸å…³æ–‡æ¡£é“¾æ¥
  - æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
```

---

## ğŸ¯ åç»­å»ºè®®

### 1. æ„å»ºå‰æ£€æŸ¥
åœ¨æ¯æ¬¡æ„å»ºå‰ï¼Œç¡®è®¤ï¼š
- [ ] âœ… æ—  `src/react-shim.d.ts` æ–‡ä»¶
- [ ] âœ… `@types/react` å’Œ `@types/react-dom` å·²å®‰è£…
- [ ] âœ… TypeScript é…ç½®æ­£ç¡®
- [ ] âœ… React å¯¼å…¥æ–¹å¼è§„èŒƒ

### 2. ä»£ç è§„èŒƒ
éµå¾ªä»¥ä¸‹è§„èŒƒï¼š
- [ ] âœ… ä½¿ç”¨ `import { useState } from 'react'` å¯¼å…¥ hooks
- [ ] âœ… ä½¿ç”¨ `import type { FC } from 'react'` å¯¼å…¥ç±»å‹
- [ ] âœ… ä¸æ··ç”¨é»˜è®¤å¯¼å…¥å’Œå‘½åå¯¼å…¥
- [ ] âœ… ä½¿ç”¨ `safeLogger` è€Œä¸æ˜¯ `logger`

### 3. å¹³å°é€‚é…
æ ¹æ®éƒ¨ç½²å¹³å°è°ƒæ•´ï¼š
- [ ] âœ… lovable.devï¼šç¦ç”¨ PWAï¼ˆ`VITE_ENABLE_PWA=false`ï¼‰
- [ ] âœ… å…¶ä»–å¹³å°ï¼šæ ¹æ®æ”¯æŒæƒ…å†µå¯ç”¨/ç¦ç”¨åŠŸèƒ½

---

## âœ… æ£€æŸ¥æ¸…å•

### ç±»å‹å†²çªæ£€æŸ¥
- [x] âœ… åˆ é™¤ `src/react-shim.d.ts`
- [x] âœ… ç¡®è®¤æ— å¼•ç”¨
- [x] âœ… å®˜æ–¹ç±»å‹å·²å®‰è£…
- [x] âœ… TypeScript é…ç½®æ­£ç¡®

### React å¯¼å…¥æ£€æŸ¥
- [x] âœ… ç§»åŠ¨ç«¯æ–‡ä»¶å·²ä¿®å¤ï¼ˆ24ä¸ªæ–‡ä»¶ï¼‰
- [x] âœ… æ—  `import React, { ... }` æ··ç”¨
- [x] âœ… æ—  `import { React }` é”™è¯¯å†™æ³•
- [x] âœ… ç±»å‹å¯¼å…¥ä½¿ç”¨ `import type`

### æ–‡æ¡£æ›´æ–°
- [x] âœ… åˆ›å»ºç±»å‹å†²çªè§£å†³æ–¹æ¡ˆæ–‡æ¡£
- [x] âœ… åˆ›å»ºå¹³å°å…¼å®¹æ€§è§„èŒƒæ–‡æ¡£
- [x] âœ… åˆ›å»ºæ„å»ºéƒ¨ç½²æ£€æŸ¥æ¸…å•
- [x] âœ… åˆ›å»ºä¿®å¤æŠ¥å‘Šï¼ˆæœ¬æ–‡æ¡£ï¼‰

### åŠŸèƒ½éªŒè¯
- [ ] â³ æ„å»ºæµ‹è¯•ï¼ˆå¾…ç”¨æˆ·æ‰§è¡Œï¼‰
- [ ] â³ æœ¬åœ°é¢„è§ˆæµ‹è¯•ï¼ˆå¾…ç”¨æˆ·æ‰§è¡Œï¼‰
- [ ] â³ éƒ¨ç½²æµ‹è¯•ï¼ˆå¾…ç”¨æˆ·æ‰§è¡Œï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. æµ‹è¯•æ„å»ºï¼ˆç”¨æˆ·éœ€æ‰§è¡Œï¼‰
```bash
# æ ‡å‡†æ„å»º
npm run build

# å¦‚æœæ˜¯ lovable.dev å¹³å°
VITE_ENABLE_PWA=false npm run build
# æˆ–
npm run build:no-pwa
```

### 2. æœ¬åœ°é¢„è§ˆï¼ˆç”¨æˆ·éœ€æ‰§è¡Œï¼‰
```bash
npm run preview

# æ£€æŸ¥ï¼š
# 1. é¡µé¢æ­£å¸¸åŠ è½½
# 2. è·¯ç”±æ­£å¸¸å·¥ä½œ
# 3. API è°ƒç”¨æ­£å¸¸
# 4. æ ·å¼æ­£ç¡®æ˜¾ç¤º
# 5. äº¤äº’åŠŸèƒ½æ­£å¸¸
```

### 3. éƒ¨ç½²ï¼ˆç”¨æˆ·éœ€æ‰§è¡Œï¼‰
```bash
# æ ¹æ®å¹³å°éƒ¨ç½²
# lovable.dev æˆ–å…¶ä»–å¹³å°
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### é¡¹ç›®å†…æ–‡æ¡£
- [Reactç±»å‹å†²çªè§£å†³æ–¹æ¡ˆ.md](./coding-standards/Reactç±»å‹å†²çªè§£å†³æ–¹æ¡ˆ.md)
- [Lovableå¹³å°å…¼å®¹æ€§è§„èŒƒ.md](./coding-standards/Lovableå¹³å°å…¼å®¹æ€§è§„èŒƒ.md)
- [Reactå¯¼å…¥è§„èŒƒ.md](./coding-standards/Reactå¯¼å…¥è§„èŒƒ.md)
- [æ„å»ºéƒ¨ç½²æ£€æŸ¥æ¸…å•.md](./æ„å»ºéƒ¨ç½²æ£€æŸ¥æ¸…å•.md)
- [ä»£ç å®¡æ ¸ä¸æ£€æŸ¥è§„èŒƒ.md](./coding-standards/ä»£ç å®¡æ ¸ä¸æ£€æŸ¥è§„èŒƒ.md)

### å¤–éƒ¨æ–‡æ¡£
- [React 18 å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript React å¤‡å¿˜å•](https://react-typescript-cheatsheet.netlify.app/)
- [@types/react on DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react)

---

## ğŸ“Š ä¿®å¤æ€»ç»“

### æ ¸å¿ƒé—®é¢˜
âŒ `src/react-shim.d.ts` ä¸å®˜æ–¹ `@types/react` å†²çª

### è§£å†³æ–¹æ¡ˆ
âœ… åˆ é™¤ `src/react-shim.d.ts`ï¼Œä½¿ç”¨å®˜æ–¹ç±»å‹å®šä¹‰

### ä¿®å¤èŒƒå›´
- âœ… 1 ä¸ªæ–‡ä»¶åˆ é™¤
- âœ… 4 ä¸ªæ–°æ–‡æ¡£åˆ›å»º
- âœ… 1 ä¸ªæ–‡æ¡£æ›´æ–°
- âœ… 24 ä¸ªç§»åŠ¨ç«¯æ–‡ä»¶ React å¯¼å…¥ä¿®å¤
- âœ… æ‰€æœ‰ `logger` æ›¿æ¢ä¸º `safeLogger`

### å½“å‰çŠ¶æ€
âœ… **ç±»å‹å†²çªå·²è§£å†³**  
âœ… **ä»£ç è§„èŒƒå·²ç»Ÿä¸€**  
âœ… **æ–‡æ¡£å·²å®Œå–„**  
â³ **å¾…ç”¨æˆ·æµ‹è¯•æ„å»º**

---

**ä¿®å¤æ—¶é—´ï¼š** 2025-11-02  
**ä¿®å¤è€…ï¼š** AI åŠ©æ‰‹  
**å®¡æ ¸è€…ï¼š** å¾…ç”¨æˆ·ç¡®è®¤  
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆï¼ˆå¾…æµ‹è¯•ï¼‰

---

## ğŸ’¡ é‡è¦æç¤º

### âš ï¸ æ°¸è¿œä¸è¦
1. âŒ ä¸è¦åˆ›å»º `src/react-shim.d.ts` æˆ–ç±»ä¼¼çš„ç±»å‹è¦†ç›–æ–‡ä»¶
2. âŒ ä¸è¦æ··ç”¨ `import React, { useState }` çš„å¯¼å…¥æ–¹å¼
3. âŒ ä¸è¦ç›´æ¥ä½¿ç”¨ `logger`ï¼Œåº”ä½¿ç”¨ `safeLogger`
4. âŒ ä¸è¦åœ¨ lovable.dev å¹³å°å¯ç”¨ Service Worker

### âœ… å§‹ç»ˆéµå¾ª
1. âœ… ä½¿ç”¨å®˜æ–¹ `@types/react` ç±»å‹å®šä¹‰
2. âœ… ä½¿ç”¨ `import { useState } from 'react'` å¯¼å…¥ hooks
3. âœ… ä½¿ç”¨ `import type { FC } from 'react'` å¯¼å…¥ç±»å‹
4. âœ… ä½¿ç”¨ `safeLogger` è¿›è¡Œæ—¥å¿—è®°å½•
5. âœ… æ ¹æ®å¹³å°å¯ç”¨/ç¦ç”¨ç›¸åº”åŠŸèƒ½

---

**é¡¹ç›®ç°åœ¨å·²å‡†å¤‡å¥½æ„å»ºå’Œéƒ¨ç½²ï¼** ğŸ‰

