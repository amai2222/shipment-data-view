# æ„å»ºéƒ¨ç½²æ£€æŸ¥æ¸…å•

## âœ… æ„å»ºå‰æ£€æŸ¥

### 1. ç¯å¢ƒé…ç½®
- [ ] âœ… Node.js ç‰ˆæœ¬æ­£ç¡®ï¼ˆæ£€æŸ¥ `.nvmrc` æˆ–é¡¹ç›®è¦æ±‚ï¼‰
- [ ] âœ… npm ä¾èµ–å·²å®‰è£…ï¼š`npm install`
- [ ] âœ… ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆ`.env` æ–‡ä»¶ï¼‰

### 2. ä»£ç è´¨é‡
- [ ] âœ… æ— è¯­æ³•é”™è¯¯
- [ ] âœ… æ—  TypeScript ç±»å‹é”™è¯¯ï¼ˆæˆ–ä»…æœ‰å·²çŸ¥è¯¯æŠ¥ï¼‰
- [ ] âœ… Lint æ£€æŸ¥é€šè¿‡ï¼š`npm run lint`
- [ ] âœ… æ‰€æœ‰å¯¼å…¥å¯¼å‡ºæ­£ç¡®

### 3. ç±»å‹å®šä¹‰æ–‡ä»¶
- [ ] âœ… **åˆ é™¤æˆ–ç¦ç”¨ `src/react-shim.d.ts`**ï¼ˆé‡è¦ï¼ï¼‰
- [ ] âœ… ä½¿ç”¨å®˜æ–¹ `@types/react` å’Œ `@types/react-dom`
- [ ] âœ… æ— è‡ªå®šä¹‰ç±»å‹å£°æ˜å†²çª

### 4. å¹³å°ç‰¹å®šé…ç½®

#### lovable.dev å¹³å°
- [ ] âœ… PWA åŠŸèƒ½å·²ç¦ç”¨ï¼š`VITE_ENABLE_PWA=false`
- [ ] âœ… Service Worker å·²ç¦ç”¨
- [ ] âœ… ä½¿ç”¨å¹³å°å…¼å®¹çš„ä¾èµ–ç‰ˆæœ¬

#### å…¶ä»–å¹³å°
- [ ] âœ… æ ¹æ®å¹³å°è¦æ±‚è°ƒæ•´é…ç½®

---

## ğŸš« å¸¸è§æ„å»ºé”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯ 1ï¼šReact ç±»å‹å†²çª
```
Error: Duplicate identifier 'useState'
Error: Module '"react"' has already exported a member named 'useState'
```

**åŸå› ï¼š** `src/react-shim.d.ts` æ–‡ä»¶ä¸å®˜æ–¹ `@types/react` å†²çª

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# åˆ é™¤ç±»å‹å†²çªæ–‡ä»¶
rm src/react-shim.d.ts

# ç¡®è®¤å®˜æ–¹ç±»å‹å·²å®‰è£…
npm list @types/react @types/react-dom
```

**æ£€æŸ¥ï¼š**
```bash
# æœç´¢æ˜¯å¦è¿˜æœ‰å…¶ä»– shim æ–‡ä»¶
find src -name "*shim*"
find src -name "*.d.ts" -type f
```

---

### é”™è¯¯ 2ï¼šService Worker ä¸æ”¯æŒ
```
Error: 'serviceWorker' is not supported on this platform
```

**åŸå› ï¼š** lovable.dev å¹³å°ä¸æ”¯æŒ Service Worker

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ–¹æ¡ˆ 1ï¼šç¦ç”¨ PWAï¼ˆæ¨èï¼‰
export VITE_ENABLE_PWA=false
npm run build

# æ–¹æ¡ˆ 2ï¼šä½¿ç”¨æ—  PWA æ„å»ºè„šæœ¬
npm run build:no-pwa
```

**é…ç½®æ£€æŸ¥ï¼š**
```typescript
// vite.config.ts
export default defineConfig({
  define: {
    'import.meta.env.VITE_ENABLE_PWA': JSON.stringify(
      process.env.VITE_ENABLE_PWA === 'true'
    )
  }
});

// index.html
if (import.meta.env.VITE_ENABLE_PWA === 'true') {
  // Service Worker æ³¨å†Œä»£ç 
}
```

---

### é”™è¯¯ 3ï¼šæ¨¡å—å¯¼å…¥é”™è¯¯
```
Error: Module '"react"' has no exported member 'React'
Error: Cannot use import statement outside a module
```

**åŸå› ï¼š** é”™è¯¯çš„ React å¯¼å…¥æ–¹å¼

**è§£å†³æ–¹æ¡ˆï¼š**
```typescript
// âŒ é”™è¯¯
import { React } from 'react';

// âœ… æ­£ç¡® - åªå¯¼å…¥ hooks
import { useState, useEffect } from 'react';

// âœ… æ­£ç¡® - å¯¼å…¥ç±»å‹
import type { FC, ReactNode } from 'react';
```

---

### é”™è¯¯ 4ï¼šä¾èµ–ç‰ˆæœ¬ä¸å…¼å®¹
```
Error: Cannot find module '@types/react'
Error: Peer dependency not satisfied
```

**åŸå› ï¼š** ä¾èµ–ç‰ˆæœ¬ä¸å…¼å®¹æˆ–æœªå®‰è£…

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ä¾èµ–
npm list @types/react @types/react-dom

# é‡æ–°å®‰è£…ä¾èµ–
npm install @types/react@18.3.12 @types/react-dom@18.3.1 --save-dev

# æ¸…ç†å¹¶é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

---

### é”™è¯¯ 5ï¼šVite æ„å»ºå¤±è´¥
```
Error: Build failed with errors
Error: Unable to resolve module
```

**åŸå› ï¼š** è·¯å¾„åˆ«åæˆ–é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
```typescript
// vite.config.ts
import path from 'path';

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  }
});

// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

---

## ğŸ“ æ„å»ºå‘½ä»¤

### æ ‡å‡†æ„å»º
```bash
# å¼€å‘æ„å»º
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### PWA ç›¸å…³æ„å»º
```bash
# å¯ç”¨ PWA æ„å»º
npm run build:pwa

# ç¦ç”¨ PWA æ„å»º
npm run build:no-pwa

# é¢„è§ˆ PWA æ„å»º
npm run preview:pwa
```

### æ£€æŸ¥å‘½ä»¤
```bash
# Lint æ£€æŸ¥
npm run lint

# TypeScript ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# ä¾èµ–å®¡è®¡
npm audit

# æ„å»ºåˆ†æ
npm run build -- --mode analyze
```

---

## ğŸ” æ„å»ºåæ£€æŸ¥

### 1. æ„å»ºäº§ç‰©
- [ ] âœ… `dist/` ç›®å½•ç”Ÿæˆ
- [ ] âœ… `index.html` å­˜åœ¨
- [ ] âœ… JavaScript æ–‡ä»¶å·²å‹ç¼©
- [ ] âœ… CSS æ–‡ä»¶å·²å‹ç¼©
- [ ] âœ… èµ„æºæ–‡ä»¶å·²å¤åˆ¶

### 2. æ–‡ä»¶å¤§å°
```bash
# æ£€æŸ¥æ„å»ºäº§ç‰©å¤§å°
du -sh dist/
ls -lh dist/assets/

# æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸å¤§çš„æ–‡ä»¶
find dist -type f -size +1M
```

### 3. æœ¬åœ°é¢„è§ˆ
```bash
# é¢„è§ˆæ„å»ºç»“æœ
npm run preview

# æ£€æŸ¥åŠŸèƒ½
# 1. é¡µé¢æ­£å¸¸åŠ è½½
# 2. è·¯ç”±æ­£å¸¸å·¥ä½œ
# 3. API è°ƒç”¨æ­£å¸¸
# 4. æ ·å¼æ­£ç¡®æ˜¾ç¤º
# 5. äº¤äº’åŠŸèƒ½æ­£å¸¸
```

---

## ğŸš€ éƒ¨ç½²å‰æ£€æŸ¥

### 1. å¹³å°å…¼å®¹æ€§
- [ ] âœ… ç›®æ ‡å¹³å°æ”¯æŒçš„åŠŸèƒ½å·²å¯ç”¨
- [ ] âœ… ä¸æ”¯æŒçš„åŠŸèƒ½å·²ç¦ç”¨ï¼ˆå¦‚ PWAï¼‰
- [ ] âœ… ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] âœ… API ç«¯ç‚¹æ­£ç¡®

### 2. æ€§èƒ½ä¼˜åŒ–
- [ ] âœ… ä»£ç å·²å‹ç¼©
- [ ] âœ… å›¾ç‰‡å·²ä¼˜åŒ–
- [ ] âœ… æ‡’åŠ è½½å·²é…ç½®
- [ ] âœ… ä»£ç åˆ†å‰²å·²å¯ç”¨

### 3. å®‰å…¨æ£€æŸ¥
- [ ] âœ… æ•æ„Ÿä¿¡æ¯å·²ç§»é™¤
- [ ] âœ… ç¯å¢ƒå˜é‡ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
- [ ] âœ… CORS é…ç½®æ­£ç¡®
- [ ] âœ… ä¾èµ–æ— å®‰å…¨æ¼æ´ï¼š`npm audit`

---

## ğŸ“Š æ„å»ºä¼˜åŒ–å»ºè®®

### 1. ä»£ç åˆ†å‰²
```typescript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          'ui-vendor': ['@radix-ui/react-dialog', '@radix-ui/react-dropdown-menu'],
          'chart-vendor': ['recharts'],
          'icon-vendor': ['lucide-react'],
          'utils': ['date-fns', 'clsx']
        }
      }
    }
  }
});
```

### 2. å‹ç¼©ä¼˜åŒ–
```typescript
export default defineConfig({
  build: {
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    }
  }
});
```

### 3. èµ„æºä¼˜åŒ–
```typescript
export default defineConfig({
  build: {
    assetsInlineLimit: 4096, // å°äº 4KB çš„æ–‡ä»¶å†…è”
    chunkSizeWarningLimit: 500, // 500KB è­¦å‘Šé˜ˆå€¼
    cssCodeSplit: true // CSS ä»£ç åˆ†å‰²
  }
});
```

---

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹è¯¦ç»†æ„å»ºæ—¥å¿—
```bash
# è¯¦ç»†æ—¥å¿—
npm run build -- --debug

# æŸ¥çœ‹æ„å»ºåˆ†æ
npm run build -- --mode analyze
```

### 2. æ£€æŸ¥ç±»å‹é”™è¯¯
```bash
# å®Œæ•´ç±»å‹æ£€æŸ¥
npx tsc --noEmit --pretty

# æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶
npx tsc --noEmit src/path/to/file.tsx
```

### 3. æ£€æŸ¥æ¨¡å—ä¾èµ–
```bash
# æŸ¥çœ‹ä¾èµ–æ ‘
npm list <package-name>

# æŸ¥çœ‹æ‰€æœ‰ä¾èµ–
npm list --depth=0

# æŸ¥çœ‹è¿‡æ—¶çš„ä¾èµ–
npm outdated
```

---

## âœ… æœ€ç»ˆæ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰çš„æœ€ç»ˆç¡®è®¤ï¼š

### ä»£ç å±‚é¢
- [ ] âœ… æ‰€æœ‰ lint é”™è¯¯å·²è§£å†³æˆ–ç¡®è®¤ä¸ºè¯¯æŠ¥
- [ ] âœ… æ‰€æœ‰ TypeScript é”™è¯¯å·²è§£å†³æˆ–ç¡®è®¤ä¸ºè¯¯æŠ¥
- [ ] âœ… æ—  `src/react-shim.d.ts` ç±»å‹å†²çªæ–‡ä»¶
- [ ] âœ… æ‰€æœ‰å¯¼å…¥ä½¿ç”¨æ­£ç¡®çš„æ–¹å¼

### æ„å»ºå±‚é¢
- [ ] âœ… æ„å»ºæˆåŠŸå®Œæˆ
- [ ] âœ… æ— æ„å»ºè­¦å‘Šæˆ–å·²ç¡®è®¤å¯å¿½ç•¥
- [ ] âœ… æ„å»ºäº§ç‰©å¤§å°åˆç†
- [ ] âœ… æœ¬åœ°é¢„è§ˆåŠŸèƒ½æ­£å¸¸

### éƒ¨ç½²å±‚é¢
- [ ] âœ… ç›®æ ‡å¹³å°é…ç½®æ­£ç¡®
- [ ] âœ… ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] âœ… PWA åŠŸèƒ½æ ¹æ®å¹³å°å¯ç”¨/ç¦ç”¨
- [ ] âœ… Service Worker æ ¹æ®å¹³å°å¯ç”¨/ç¦ç”¨

### åŠŸèƒ½å±‚é¢
- [ ] âœ… è·¯ç”±æ­£å¸¸å·¥ä½œ
- [ ] âœ… API è°ƒç”¨æ­£å¸¸
- [ ] âœ… è®¤è¯åŠŸèƒ½æ­£å¸¸
- [ ] âœ… æƒé™æ§åˆ¶æ­£å¸¸
- [ ] âœ… ç§»åŠ¨ç«¯é€‚é…æ­£å¸¸

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Reactç±»å‹å†²çªè§£å†³æ–¹æ¡ˆ.md](./coding-standards/Reactç±»å‹å†²çªè§£å†³æ–¹æ¡ˆ.md)
- [Lovableå¹³å°å…¼å®¹æ€§è§„èŒƒ.md](./coding-standards/Lovableå¹³å°å…¼å®¹æ€§è§„èŒƒ.md)
- [PWAä¼ä¸šå¾®ä¿¡ä¼˜åŒ–è¯´æ˜.md](./PWAä¼ä¸šå¾®ä¿¡ä¼˜åŒ–è¯´æ˜.md)
- [ä»£ç å®¡æ ¸ä¸æ£€æŸ¥è§„èŒƒ.md](./coding-standards/ä»£ç å®¡æ ¸ä¸æ£€æŸ¥è§„èŒƒ.md)

---

**æœ€åæ›´æ–°ï¼š** 2025-11-02  
**ç»´æŠ¤è€…ï¼š** å¼€å‘å›¢é˜Ÿ  
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ

