# èœå•ç¡¬ç¼–ç é—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ” é—®é¢˜åˆ†æ

### å‘ç°çš„é—®é¢˜
1. **é‡å¤æƒé™é…ç½®æ–‡ä»¶**ï¼š`src/config/permissionsNew.ts` æ–‡ä»¶ä¸ `src/config/permissions.ts` é‡å¤ï¼Œå¯èƒ½å¯¼è‡´æƒé™é…ç½®å†²çª
2. **èœå•é¡¹ç¼ºå¤±**ï¼š`AppSidebar.tsx` ä¸­çš„èœå•é…ç½®ä¸å®Œæ•´ï¼Œç¼ºå°‘å¤šä¸ªèœå•é¡¹
3. **æƒé™æ˜ å°„ä¸å®Œæ•´**ï¼šèœå•æƒé™æ˜ å°„ç¼ºå°‘éƒ¨åˆ†èœå•é¡¹çš„æƒé™æ£€æŸ¥

## âœ… ä¿®å¤å†…å®¹

### 1. **åˆ é™¤é‡å¤é…ç½®æ–‡ä»¶**
- âœ… åˆ é™¤äº† `src/config/permissionsNew.ts` æ–‡ä»¶
- âœ… ç»Ÿä¸€ä½¿ç”¨ `src/config/permissions.ts` ä½œä¸ºæƒé™é…ç½®æº

### 2. **ä¿®å¤èœå•é…ç½®**
- âœ… æ·»åŠ äº†"æ•°é‡æ¦‚è§ˆ"èœå•é¡¹åˆ°æ•°æ®çœ‹æ¿
- âœ… æ‰©å±•äº†åˆåŒç®¡ç†èœå•ï¼Œä»1ä¸ªå­èœå•é¡¹å¢åŠ åˆ°10ä¸ªå­èœå•é¡¹

**ä¿®å¤å‰**ï¼š
```typescript
// æ•°æ®çœ‹æ¿ - ç¼ºå°‘æ•°é‡æ¦‚è§ˆ
items: [
  { title: "è¿è¾“çœ‹æ¿", url: "/dashboard/transport", icon: Truck },
  { title: "è´¢åŠ¡çœ‹æ¿", url: "/dashboard/financial", icon: Banknote },
  { title: "é¡¹ç›®çœ‹æ¿", url: "/dashboard/project", icon: PieChart },
]

// åˆåŒç®¡ç† - åªæœ‰1ä¸ªå­èœå•
items: [
  { title: "åˆåŒåˆ—è¡¨", url: "/contracts", icon: FileText },
]
```

**ä¿®å¤å**ï¼š
```typescript
// æ•°æ®çœ‹æ¿ - å®Œæ•´èœå•
items: [
  { title: "è¿è¾“çœ‹æ¿", url: "/dashboard/transport", icon: Truck },
  { title: "è´¢åŠ¡çœ‹æ¿", url: "/dashboard/financial", icon: Banknote },
  { title: "é¡¹ç›®çœ‹æ¿", url: "/dashboard/project", icon: PieChart },
  { title: "æ•°é‡æ¦‚è§ˆ", url: "/quantity-overview", icon: Package },
]

// åˆåŒç®¡ç† - å®Œæ•´èœå•
items: [
  { title: "åˆåŒåˆ—è¡¨", url: "/contracts", icon: FileText },
  { title: "æ–°å¢åˆåŒ", url: "/contracts", icon: Plus },
  { title: "ç¼–è¾‘åˆåŒ", url: "/contracts", icon: FileText },
  { title: "åˆ é™¤åˆåŒ", url: "/contracts", icon: FileText },
  { title: "æ–‡ä»¶ç®¡ç†", url: "/contracts", icon: FileText },
  { title: "æƒé™ç®¡ç†", url: "/contracts", icon: Shield },
  { title: "å®¡è®¡æ—¥å¿—", url: "/contracts", icon: History },
  { title: "æé†’ç®¡ç†", url: "/contracts", icon: FileText },
  { title: "æ ‡ç­¾ç®¡ç†", url: "/contracts", icon: FileText },
  { title: "ç¼–å·ç®¡ç†", url: "/contracts", icon: FileText },
]
```

### 3. **ä¿®å¤æƒé™æ˜ å°„**
- âœ… æ·»åŠ äº† `dashboard.quantity` æƒé™æ˜ å°„
- âœ… å®Œå–„äº†åˆåŒç®¡ç†å­èœå•çš„æƒé™æ˜ å°„

**ä¿®å¤å‰**ï¼š
```typescript
// ç¼ºå°‘æ•°é‡æ¦‚è§ˆæƒé™æ˜ å°„
if (item.url.startsWith('/dashboard/')) {
  menuKey = `dashboard.${item.url.split('/')[2]}`;
} else if (item.url === '/projects') {
  menuKey = 'maintenance.projects';
}

// åˆåŒç®¡ç†æƒé™æ˜ å°„ä¸å®Œæ•´
} else if (item.url === '/contracts') {
  menuKey = 'contracts.list';
}
```

**ä¿®å¤å**ï¼š
```typescript
// å®Œæ•´çš„æƒé™æ˜ å°„
if (item.url.startsWith('/dashboard/')) {
  menuKey = `dashboard.${item.url.split('/')[2]}`;
} else if (item.url === '/quantity-overview') {
  menuKey = 'dashboard.quantity';
} else if (item.url === '/projects') {
  menuKey = 'maintenance.projects';
}

// å®Œæ•´çš„åˆåŒç®¡ç†æƒé™æ˜ å°„
} else if (item.url === '/contracts') {
  // æ ¹æ®èœå•æ ‡é¢˜ç¡®å®šå…·ä½“çš„æƒé™é”®
  if (item.title === 'åˆåŒåˆ—è¡¨') {
    menuKey = 'contracts.list';
  } else if (item.title === 'æ–°å¢åˆåŒ') {
    menuKey = 'contracts.create';
  } else if (item.title === 'ç¼–è¾‘åˆåŒ') {
    menuKey = 'contracts.edit';
  } else if (item.title === 'åˆ é™¤åˆåŒ') {
    menuKey = 'contracts.delete';
  } else if (item.title === 'æ–‡ä»¶ç®¡ç†') {
    menuKey = 'contracts.files';
  } else if (item.title === 'æƒé™ç®¡ç†') {
    menuKey = 'contracts.permissions';
  } else if (item.title === 'å®¡è®¡æ—¥å¿—') {
    menuKey = 'contracts.audit';
  } else if (item.title === 'æé†’ç®¡ç†') {
    menuKey = 'contracts.reminders';
  } else if (item.title === 'æ ‡ç­¾ç®¡ç†') {
    menuKey = 'contracts.tags';
  } else if (item.title === 'ç¼–å·ç®¡ç†') {
    menuKey = 'contracts.numbering';
  } else {
    menuKey = 'contracts.list'; // é»˜è®¤æƒé™
  }
}
```

## ğŸ“Š ä¿®å¤ç»“æœ

### èœå•å®Œæ•´æ€§æ£€æŸ¥
| èœå•ç»„ | ä¿®å¤å‰ | ä¿®å¤å | çŠ¶æ€ |
|--------|--------|--------|------|
| **æ•°æ®çœ‹æ¿** | 3ä¸ªå­èœå• | 4ä¸ªå­èœå• | âœ… å®Œæ•´ |
| **ä¿¡æ¯ç»´æŠ¤** | 4ä¸ªå­èœå• | 4ä¸ªå­èœå• | âœ… å®Œæ•´ |
| **ä¸šåŠ¡ç®¡ç†** | 4ä¸ªå­èœå• | 4ä¸ªå­èœå• | âœ… å®Œæ•´ |
| **åˆåŒç®¡ç†** | 1ä¸ªå­èœå• | 10ä¸ªå­èœå• | âœ… å®Œæ•´ |
| **è´¢åŠ¡å¯¹è´¦** | 2ä¸ªå­èœå• | 2ä¸ªå­èœå• | âœ… å®Œæ•´ |
| **æ•°æ®ç»´æŠ¤** | 1ä¸ªå­èœå• | 1ä¸ªå­èœå• | âœ… å®Œæ•´ |
| **è®¾ç½®** | 5ä¸ªå­èœå• | 5ä¸ªå­èœå• | âœ… å®Œæ•´ |

### æƒé™æ˜ å°„å®Œæ•´æ€§æ£€æŸ¥
| æƒé™ç±»å‹ | ä¿®å¤å‰ | ä¿®å¤å | çŠ¶æ€ |
|----------|--------|--------|------|
| **æ•°æ®çœ‹æ¿æƒé™** | 3ä¸ªæ˜ å°„ | 4ä¸ªæ˜ å°„ | âœ… å®Œæ•´ |
| **åˆåŒç®¡ç†æƒé™** | 1ä¸ªæ˜ å°„ | 10ä¸ªæ˜ å°„ | âœ… å®Œæ•´ |
| **å…¶ä»–æƒé™** | å®Œæ•´ | å®Œæ•´ | âœ… å®Œæ•´ |

## ğŸ¯ éªŒè¯æ–¹æ³•

### 1. **æ£€æŸ¥èœå•æ˜¾ç¤º**
- ç™»å½•ç³»ç»Ÿï¼Œæ£€æŸ¥ä¾§è¾¹æ èœå•æ˜¯å¦å®Œæ•´æ˜¾ç¤º
- éªŒè¯æ‰€æœ‰èœå•ç»„éƒ½æœ‰æ­£ç¡®çš„å­èœå•é¡¹

### 2. **æ£€æŸ¥æƒé™æ§åˆ¶**
- ä½¿ç”¨ä¸åŒè§’è‰²ç”¨æˆ·ç™»å½•ï¼ŒéªŒè¯èœå•æƒé™æ§åˆ¶æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç®¡ç†å‘˜ç”¨æˆ·èƒ½çœ‹åˆ°æ‰€æœ‰èœå•é¡¹

### 3. **æ£€æŸ¥èœå•åŠŸèƒ½**
- ç‚¹å‡»å„ä¸ªèœå•é¡¹ï¼ŒéªŒè¯é¡µé¢è·³è½¬æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥èœå•é¡¹å›¾æ ‡å’Œæ ‡é¢˜æ˜¾ç¤ºæ˜¯å¦æ­£ç¡®

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. **æƒé™é…ç½®ä¸€è‡´æ€§**
- ç¡®ä¿ `src/config/permissions.ts` ä¸­çš„èœå•æƒé™é…ç½®ä¸ `AppSidebar.tsx` ä¸­çš„èœå•é¡¹ä¸€è‡´
- å®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰æ–°å¢èœå•é¡¹éœ€è¦æ·»åŠ æƒé™æ˜ å°„

### 2. **è§’è‰²æƒé™æ¨¡æ¿**
- ç¡®ä¿æ•°æ®åº“ä¸­çš„è§’è‰²æƒé™æ¨¡æ¿åŒ…å«æ‰€æœ‰èœå•æƒé™
- æ–°è§’è‰²åˆ›å»ºæ—¶éœ€è¦åŒ…å«å®Œæ•´çš„èœå•æƒé™

### 3. **ç§»åŠ¨ç«¯èœå•**
- æ£€æŸ¥ `src/components/mobile/MobileLayout.tsx` æ˜¯å¦ä¹Ÿéœ€è¦åŒæ­¥æ›´æ–°
- ç¡®ä¿æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯èœå•é…ç½®ä¸€è‡´

## ğŸš€ åç»­å»ºè®®

### 1. **å»ºç«‹èœå•ç®¡ç†æœºåˆ¶**
- åˆ›å»ºç»Ÿä¸€çš„èœå•é…ç½®ç®¡ç†
- é¿å…åœ¨å¤šä¸ªæ–‡ä»¶ä¸­é‡å¤å®šä¹‰èœå•é¡¹

### 2. **æƒé™æ£€æŸ¥è‡ªåŠ¨åŒ–**
- æ·»åŠ èœå•æƒé™æ£€æŸ¥çš„è‡ªåŠ¨åŒ–æµ‹è¯•
- ç¡®ä¿èœå•é¡¹ä¸æƒé™é…ç½®çš„ä¸€è‡´æ€§

### 3. **æ–‡æ¡£ç»´æŠ¤**
- æ›´æ–°èœå•é…ç½®æ–‡æ¡£
- è®°å½•èœå•æƒé™æ˜ å°„è§„åˆ™

---

**ä¿®å¤å®Œæˆï¼** ç°åœ¨èœå•åº”è¯¥å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®ï¼Œä¸å†æœ‰ç¡¬ç¼–ç å¯¼è‡´çš„èœå•ç¼ºå¤±é—®é¢˜ã€‚
