# 文件存放规范

## 📋 重要规则

**所有新文件必须放到对应目录，严禁放在根目录！**

---

## 📂 MD文档存放规则

### 按功能模块分类

| 功能模块 | 存放目录 | 示例 |
|---------|---------|------|
| 审批功能 | `docs/approval-features/` | 批量审批、审核流程 |
| 开票管理 | `docs/invoice-management/` | 开票申请、开票审核 |
| 付款管理 | `docs/payment-management/` | 付款申请、付款审核 |
| 移动端 | `docs/mobile/` | 移动端优化、H5页面 |
| 组件 | `docs/components/` | 组件库、组件重构 |
| 权限 | `docs/permissions/` | 用户权限、角色管理 |
| 项目 | `docs/project-management/` | 项目管理、合作链路 |
| 性能 | `docs/performance/` | 性能优化、查询优化 |
| 修复 | `docs/bug-fixes/` | Bug修复、错误处理 |
| 总结 | `docs/daily-summary/` | 工作总结、代码审核 |
| 数据库 | `docs/database/` | 数据库设计、迁移说明 |
| 司机 | `docs/driver-management/` | 司机管理 |
| 合作方 | `docs/partner-management/` | 合作方、货主 |
| 运单 | `docs/waybill-management/` | 运单管理 |
| 看板 | `docs/shipper-dashboard/` | 货主看板 |
| 其他 | `docs/misc/` | 不属于上述分类的 |

---

## 🗄️ SQL文件存放规则

### 按用途分类

| 用途 | 存放目录 | 说明 |
|------|---------|------|
| **正式迁移** | `supabase/migrations/` | 数据库schema变更，命名：`YYYYMMDD_description.sql` |
| 备份SQL | `scripts/sql/backup/` | 数据库备份、函数备份 |
| 修复SQL | `scripts/sql/fix/` | 字段修复、函数修复 |
| 测试SQL | `scripts/sql/test/` | 验证、检查、测试 |
| 数据迁移 | `scripts/sql/migration/` | 一次性数据更新 |

---

## ✅ 正确示例

### 创建审批功能文档
```
❌ 错误: /批量审批优化.md
✅ 正确: /docs/approval-features/批量审批优化.md
```

### 创建数据库迁移
```
❌ 错误: /add_new_function.sql
✅ 正确: /supabase/migrations/20250131_add_new_function.sql
```

### 创建修复SQL
```
❌ 错误: /fix_bug.sql
✅ 正确: /scripts/sql/fix/fix_某某问题.sql
```

---

## 🚫 根目录只保留

### 必须保留的MD文件（仅6个）
- README.md
- PROJECT_SUMMARY.md
- SYSTEM_DOCUMENTATION.md
- API_DOCUMENTATION.md
- DEPLOYMENT_GUIDE.md
- DATABASE_FUNCTIONS_BACKUP.md

### 配置和工具文件
- package.json、tsconfig.json等配置文件
- organize-docs.ps1、整理*.bat等工具脚本
- Dockerfile、docker-compose.yml等

---

## 💡 AI助手规范

**当我（AI助手）创建新文件时**：

1. **判断文件类型**
   - MD文档 → 确定功能模块
   - SQL文件 → 确定用途类型

2. **选择正确目录**
   - 不要放根目录！
   - 直接放到分类目录

3. **使用描述性文件名**
   - 功能-操作-状态.md
   - YYYYMMDD_description.sql

---

## 📝 示例场景

### 场景1：优化了移动端审批功能

```
创建文档：
docs/mobile/移动端审批按钮优化完成.md ✅
```

### 场景2：添加新的数据库函数

```
创建迁移：
supabase/migrations/20250131_add_batch_function.sql ✅
```

### 场景3：修复某个Bug

```
创建文档：
docs/bug-fixes/图标导入错误修复.md ✅

如有修复SQL：
scripts/sql/fix/fix_icon_import.sql ✅
```

---

## 🎯 执行步骤

1. **立即整理现有文档**
   - 双击运行：`【双击我】开始整理.bat`
   - 选择 [3] 全部整理

2. **从现在开始**
   - 所有新文档自动放到正确位置
   - 不再污染根目录

3. **定期检查**
   - 每周检查根目录
   - 如有新文档，立即归档

---

**这是项目规范，必须遵守！** ✅

