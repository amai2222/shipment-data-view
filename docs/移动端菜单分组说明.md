# 移动端菜单分组说明

## 📱 移动端菜单分组改进

移动端菜单已按照桌面端的分组方式进行重新组织，提供更好的用户体验和更清晰的导航结构。

## 🎯 分组结构

### 1. **数据看板** 📊
- **运输概览** - 首页概览
- **项目看板** - 项目数据统计
- **财务概览** - 财务数据统计

### 2. **信息维护** 🗄️
- **项目管理** - 项目信息管理
- **司机管理** - 司机信息管理
- **地点管理** - 地点信息管理
- **合作伙伴** - 合作方信息管理

### 3. **业务管理** 📝
- **运单管理** - 运单录入和管理
- **磅单记录** - 磅单数据管理
- **付款申请** - 付款申请处理
- **申请单管理** - 申请单管理

### 4. **合同管理** 📋
- **合同列表** - 合同信息管理

### 5. **财务对账** 💰
- **运费对账** - 运费对账功能
- **付款与开票** - 付款和开票管理

### 6. **系统设置** ⚙️
- **用户管理** - 用户账户管理
- **权限管理** - 权限配置管理
- **集成权限管理** - 集成权限管理
- **操作日志** - 系统操作日志

## 🔄 改进内容

### 1. **分组结构优化**
- 将原本平铺的菜单项按功能分组
- 每个分组有明确的标题和图标
- 分组标题使用小写字母和特殊样式

### 2. **视觉层次优化**
- 分组标题使用灰色小字显示
- 菜单项使用缩进显示层级关系
- 保持一致的图标和间距

### 3. **权限控制**
- 每个菜单项都有对应的角色权限
- 根据用户权限动态显示菜单
- 空分组自动隐藏

### 4. **响应式设计**
- 适配移动端屏幕尺寸
- 使用 Sheet 组件实现侧边栏
- 支持触摸操作

## 📋 菜单配置

### 分组配置结构
```typescript
const menuGroups = [
  {
    title: '数据看板',
    icon: BarChart3,
    items: [
      {
        name: '运输概览',
        href: '/m/',
        icon: Home,
        roles: ['admin', 'finance', 'business', 'operator', 'viewer']
      },
      // ... 其他菜单项
    ]
  },
  // ... 其他分组
];
```

### 权限过滤逻辑
```typescript
const filteredMenuGroups = menuGroups.map(group => ({
  ...group,
  items: group.items.filter(item => 
    hasPermission(item.roles as any) && hasMenuAccess(item.href)
  )
})).filter(group => group.items.length > 0);
```

## 🎨 视觉效果

### 分组标题样式
- 使用小写字母
- 灰色文字
- 加粗显示
- 字母间距加宽

### 菜单项样式
- 左侧缩进 16px
- 图标和文字对齐
- 悬停效果
- 激活状态高亮

### 分组间距
- 分组之间间距 16px
- 分组内菜单项间距 4px
- 整体内边距 16px

## 🔐 权限控制

### 角色权限分配

| 角色 | 数据看板 | 信息维护 | 业务管理 | 合同管理 | 财务对账 | 系统设置 |
|------|----------|----------|----------|----------|----------|----------|
| **管理员** | ✅ 全部 | ✅ 全部 | ✅ 全部 | ✅ 全部 | ✅ 全部 | ✅ 全部 |
| **财务人员** | ✅ 部分 | ✅ 部分 | ✅ 部分 | ✅ 查看 | ✅ 全部 | ❌ 无权限 |
| **业务人员** | ✅ 部分 | ✅ 全部 | ✅ 全部 | ✅ 管理 | ✅ 部分 | ❌ 无权限 |
| **操作员** | ✅ 部分 | ✅ 部分 | ✅ 部分 | ❌ 无权限 | ❌ 无权限 | ❌ 无权限 |
| **查看者** | ✅ 部分 | ✅ 部分 | ❌ 无权限 | ❌ 无权限 | ❌ 无权限 | ❌ 无权限 |

### 动态菜单显示
- 根据用户角色显示对应菜单
- 无权限的分组自动隐藏
- 空分组不显示

## 📱 移动端特性

### 1. **触摸友好**
- 菜单项高度适中，便于触摸
- 支持滑动操作
- 响应式布局

### 2. **性能优化**
- 懒加载菜单项
- 权限预过滤
- 减少不必要的渲染

### 3. **用户体验**
- 清晰的视觉层次
- 直观的分组结构
- 快速导航

## 🔄 与桌面端一致性

### 1. **分组结构一致**
- 移动端和桌面端使用相同的分组
- 菜单项名称保持一致
- 权限控制逻辑一致

### 2. **功能对应**
- 移动端功能与桌面端对应
- 路由路径保持一致
- 权限验证逻辑一致

### 3. **视觉风格**
- 使用相同的图标
- 保持一致的色彩方案
- 统一的交互模式

## 📊 改进效果

### 1. **用户体验提升**
- 菜单结构更清晰
- 导航更直观
- 操作更便捷

### 2. **维护性提升**
- 代码结构更清晰
- 配置更集中
- 扩展更容易

### 3. **一致性提升**
- 移动端和桌面端保持一致
- 权限控制统一
- 视觉风格统一

移动端菜单分组改进完成后，用户可以在移动设备上享受与桌面端一致的导航体验，同时保持了移动端特有的触摸友好特性。
