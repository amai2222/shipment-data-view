# ç§»åŠ¨ç«¯ä¼˜åŒ–å¿«é€Ÿå…¥é—¨

> 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ç§»åŠ¨ç«¯ä¼˜åŒ–ç»„ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥: å¼•å…¥æ ·å¼

æ ·å¼å·²è‡ªåŠ¨å¼•å…¥åˆ° `src/index.css` ä¸­,æ— éœ€é¢å¤–é…ç½®ã€‚

### ç¬¬äºŒæ­¥: é€‰æ‹©ä½ éœ€è¦çš„åŠŸèƒ½

## ğŸ“± å¸¸è§åœºæ™¯

### åœºæ™¯1: åˆ›å»ºä¸€ä¸ªç§»åŠ¨ç«¯åˆ—è¡¨é¡µ

```tsx
import { EnhancedMobileLayout } from '@/components/mobile/EnhancedMobileLayout';
import { MobileOptimizedList } from '@/components/mobile/MobileOptimizedList';
import { MobileCard } from '@/components/mobile/MobileCard';

function MyListPage() {
  const [data, setData] = useState([]);

  return (
    <EnhancedMobileLayout title="åˆ—è¡¨">
      <MobileOptimizedList
        items={data}
        renderItem={(item) => (
          <MobileCard onClick={() => handleClick(item)}>
            <h3>{item.title}</h3>
            <p>{item.description}</p>
          </MobileCard>
        )}
        keyExtractor={(item) => item.id}
        onRefresh={async () => {
          const newData = await fetchData();
          setData(newData);
        }}
        onLoadMore={async () => {
          const moreData = await fetchMore();
          setData([...data, ...moreData]);
        }}
        hasMore={true}
        enablePullToRefresh
        enableInfiniteScroll
      />
    </EnhancedMobileLayout>
  );
}
```

### åœºæ™¯2: åˆ›å»ºä¸€ä¸ªç§»åŠ¨ç«¯è¡¨å•é¡µ

```tsx
import { EnhancedMobileLayout } from '@/components/mobile/EnhancedMobileLayout';
import { MobileFormCard, MobileFormField } from '@/components/mobile/MobileFormField';
import { MobileButton } from '@/components/mobile/MobileTouchable';

function MyFormPage() {
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');

  return (
    <EnhancedMobileLayout title="è¡¨å•">
      <MobileFormCard title="åŸºæœ¬ä¿¡æ¯">
        <MobileFormField
          label="å§“å"
          value={name}
          onChange={setName}
          type="text"
          required
        />
        
        <MobileFormField
          label="æ‰‹æœºå·"
          value={phone}
          onChange={setPhone}
          type="tel"
          required
        />

        <MobileButton
          onClick={handleSubmit}
          variant="primary"
          className="w-full mt-4"
        >
          æäº¤
        </MobileButton>
      </MobileFormCard>
    </EnhancedMobileLayout>
  );
}
```

### åœºæ™¯3: æ·»åŠ ä¸‹æ‹‰åˆ·æ–°

```tsx
import { MobilePullToRefresh } from '@/components/mobile/MobilePullToRefresh';

function MyPage() {
  return (
    <MobilePullToRefresh 
      onRefresh={async () => {
        await refetchData();
      }}
    >
      <YourContent />
    </MobilePullToRefresh>
  );
}
```

### åœºæ™¯4: æ·»åŠ åŠ è½½çŠ¶æ€

```tsx
import { MobileSkeletonLoader } from '@/components/mobile/MobileSkeletonLoader';

function MyPage() {
  const { data, isLoading } = useQuery();

  if (isLoading) {
    return <MobileSkeletonLoader count={5} type="card" />;
  }

  return <YourContent data={data} />;
}
```

### åœºæ™¯5: æ·»åŠ ç©ºçŠ¶æ€

```tsx
import { NoDataState, ErrorState } from '@/components/mobile/MobileEmptyState';

function MyList() {
  if (isError) {
    return <ErrorState onRetry={refetch} />;
  }

  if (data.length === 0) {
    return <NoDataState onRefresh={refetch} />;
  }

  return <List data={data} />;
}
```

### åœºæ™¯6: æ·»åŠ è§¦è§‰åé¦ˆ

```tsx
import { triggerHaptic } from '@/utils/mobile';
import { MobileButton } from '@/components/mobile/MobileTouchable';

function MyButton() {
  const handleClick = () => {
    triggerHaptic('light'); // è½»è§¦åé¦ˆ
    // æ‰§è¡Œæ“ä½œ
  };

  return (
    <MobileButton 
      onClick={handleClick}
      hapticFeedback // è‡ªåŠ¨è§¦è§‰åé¦ˆ
    >
      ç‚¹å‡»æˆ‘
    </MobileButton>
  );
}
```

### åœºæ™¯7: æ·»åŠ æ»‘åŠ¨æ“ä½œ

```tsx
import { MobileSwipeableCard } from '@/components/mobile/MobileSwipeableCard';
import { Edit, Trash } from 'lucide-react';

function MyListItem({ item }) {
  return (
    <MobileSwipeableCard
      rightActions={[
        {
          icon: Edit,
          label: 'ç¼–è¾‘',
          onClick: () => handleEdit(item)
        },
        {
          icon: Trash,
          label: 'åˆ é™¤',
          onClick: () => handleDelete(item),
          variant: 'destructive'
        }
      ]}
    >
      <div className="p-4">
        <h3>{item.title}</h3>
      </div>
    </MobileSwipeableCard>
  );
}
```

## ğŸ¯ æœ€å¸¸ç”¨çš„5ä¸ªç»„ä»¶

### 1. EnhancedMobileLayout
ç§»åŠ¨ç«¯é¡µé¢å¸ƒå±€å®¹å™¨,è‡ªå¸¦å¯¼èˆªæ ã€ç¦»çº¿æ£€æµ‹ã€ç½‘ç»œæç¤ºã€‚

```tsx
<EnhancedMobileLayout title="é¡µé¢æ ‡é¢˜">
  <YourContent />
</EnhancedMobileLayout>
```

### 2. MobileOptimizedList
ä¼˜åŒ–çš„åˆ—è¡¨ç»„ä»¶,é›†æˆä¸‹æ‹‰åˆ·æ–°ã€æ— é™æ»šåŠ¨ã€è™šæ‹Ÿåˆ—è¡¨ã€‚

```tsx
<MobileOptimizedList
  items={data}
  renderItem={(item) => <ItemCard {...item} />}
  keyExtractor={(item) => item.id}
  onRefresh={refetch}
  onLoadMore={loadMore}
/>
```

### 3. MobileFormField
ç§»åŠ¨ç«¯è¡¨å•å­—æ®µ,è‡ªåŠ¨ä¼˜åŒ–è¾“å…¥ä½“éªŒã€‚

```tsx
<MobileFormField
  label="å§“å"
  value={name}
  onChange={setName}
  type="text"
  required
/>
```

### 4. MobileSkeletonLoader
éª¨æ¶å±åŠ è½½ç»„ä»¶,æå‡æ„ŸçŸ¥æ€§èƒ½ã€‚

```tsx
{isLoading && <MobileSkeletonLoader count={5} type="card" />}
```

### 5. MobileButton / MobileTouchable
è§¦æ‘¸ä¼˜åŒ–æŒ‰é’®,è‡ªåŠ¨è§¦è§‰åé¦ˆã€‚

```tsx
<MobileButton onClick={handleClick} variant="primary">
  ç¡®è®¤
</MobileButton>
```

## ğŸ“¦ å®Œæ•´ç¤ºä¾‹æ¨¡æ¿

å¤åˆ¶è¿™ä¸ªæ¨¡æ¿å¿«é€Ÿå¼€å§‹:

```tsx
import React, { useState, useEffect } from 'react';
import { EnhancedMobileLayout } from '@/components/mobile/EnhancedMobileLayout';
import { MobileOptimizedList } from '@/components/mobile/MobileOptimizedList';
import { MobileCard } from '@/components/mobile/MobileCard';
import { MobileSkeletonLoader } from '@/components/mobile/MobileSkeletonLoader';
import { NoDataState, ErrorState } from '@/components/mobile/MobileEmptyState';
import { MobileFAB } from '@/components/mobile/MobileBottomNav';
import { Plus } from 'lucide-react';
import { useNavigate } from 'react-router-dom';

export default function TemplateMobilePage() {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(false);
  const [hasMore, setHasMore] = useState(true);
  const navigate = useNavigate();

  const loadData = async (isRefresh = false) => {
    try {
      setLoading(true);
      setError(false);
      
      // æ›¿æ¢ä¸ºä½ çš„APIè°ƒç”¨
      const response = await fetch('/api/data');
      const newData = await response.json();
      
      setData(isRefresh ? newData : [...data, ...newData]);
      setHasMore(newData.length > 0);
    } catch (err) {
      setError(true);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    loadData(true);
  }, []);

  if (loading && data.length === 0) {
    return (
      <EnhancedMobileLayout title="åŠ è½½ä¸­">
        <MobileSkeletonLoader count={5} type="card" />
      </EnhancedMobileLayout>
    );
  }

  if (error && data.length === 0) {
    return (
      <EnhancedMobileLayout title="é”™è¯¯">
        <ErrorState onRetry={() => loadData(true)} />
      </EnhancedMobileLayout>
    );
  }

  if (data.length === 0) {
    return (
      <EnhancedMobileLayout title="æš‚æ— æ•°æ®">
        <NoDataState onRefresh={() => loadData(true)} />
      </EnhancedMobileLayout>
    );
  }

  return (
    <EnhancedMobileLayout title="åˆ—è¡¨é¡µ">
      <MobileOptimizedList
        items={data}
        renderItem={(item) => (
          <MobileCard
            onClick={() => navigate(`/m/detail/${item.id}`)}
            onEdit={() => navigate(`/m/edit/${item.id}`)}
            onDelete={() => handleDelete(item.id)}
          >
            <div className="p-4">
              <h3 className="font-semibold mb-2">{item.title}</h3>
              <p className="text-sm text-muted-foreground">{item.description}</p>
            </div>
          </MobileCard>
        )}
        keyExtractor={(item) => item.id}
        onRefresh={() => loadData(true)}
        onLoadMore={() => loadData(false)}
        hasMore={hasMore}
        enablePullToRefresh
        enableInfiniteScroll
        useVirtualList={data.length > 50}
      />

      <MobileFAB
        icon={Plus}
        label="æ–°å»º"
        onClick={() => navigate('/m/create')}
        position="bottom-right"
        variant="primary"
      />
    </EnhancedMobileLayout>
  );
}
```

## ğŸ› ï¸ å¸¸ç”¨å·¥å…·å‡½æ•°

```tsx
import {
  triggerHaptic,      // è§¦è§‰åé¦ˆ
  copyToClipboard,    // å¤åˆ¶
  shareContent,       // åˆ†äº«
  callPhone,          // æ‹¨æ‰“ç”µè¯
  sendSMS,            // å‘é€çŸ­ä¿¡
  scrollToTop,        // æ»šåŠ¨åˆ°é¡¶éƒ¨
  compressImage       // å‹ç¼©å›¾ç‰‡
} from '@/utils/mobile';

// ä½¿ç”¨ç¤ºä¾‹
triggerHaptic('light');
await copyToClipboard('å¤åˆ¶å†…å®¹');
await shareContent({ title: 'æ ‡é¢˜', url: 'https://...' });
callPhone('13800138000');
```

## ğŸ“š æ›´å¤šèµ„æº

- [å®Œæ•´æŒ‡å—](./ç§»åŠ¨ç«¯ä¼˜åŒ–æŒ‡å—.md) - è¯¦ç»†æ–‡æ¡£
- [ç¤ºä¾‹é¡µé¢](./src/pages/mobile/MobileOptimizationDemo.tsx) - äº¤äº’æ¼”ç¤º
- [æ€»ç»“æŠ¥å‘Š](./ç§»åŠ¨ç«¯ä¼˜åŒ–å®Œæˆæ€»ç»“.md) - ä¼˜åŒ–æˆæœ

## ğŸ’¡ å°è´´å£«

1. **æ€§èƒ½**: åˆ—è¡¨è¶…è¿‡50é¡¹æ—¶è‡ªåŠ¨å¯ç”¨è™šæ‹Ÿæ»šåŠ¨
2. **è¾“å…¥**: è¾“å…¥æ¡†å­—ä½“ä¿æŒ16pxä»¥ä¸Š,é˜²æ­¢iOSè‡ªåŠ¨ç¼©æ”¾
3. **è§¦æ‘¸**: æŒ‰é’®æœ€å°å°ºå¯¸44x44px,ç¬¦åˆè§¦æ‘¸è§„èŒƒ
4. **å®‰å…¨åŒºåŸŸ**: ç»„ä»¶è‡ªåŠ¨é€‚é…åˆ˜æµ·å±å®‰å…¨åŒºåŸŸ
5. **ç½‘ç»œ**: è‡ªåŠ¨æ£€æµ‹ç¦»çº¿å’Œæ…¢é€Ÿç½‘ç»œçŠ¶æ€

## ğŸ‰ å¼€å§‹ä½¿ç”¨

é€‰æ‹©ä¸€ä¸ªåœºæ™¯,å¤åˆ¶ä»£ç ,æ›¿æ¢æ•°æ®æº,ç«‹å³å¼€å§‹!

æœ‰é—®é¢˜?æŸ¥çœ‹[å®Œæ•´æŒ‡å—](./ç§»åŠ¨ç«¯ä¼˜åŒ–æŒ‡å—.md)è·å–è¯¦ç»†è¯´æ˜ã€‚

