# æ„å»ºéƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—

## é—®é¢˜ï¼š`assets/DriverManagement-wJgeCmCo.js` æ–‡ä»¶ä¸å­˜åœ¨

### ğŸ” æ ¹æœ¬åŸå› 

è¿™ä¸ªé”™è¯¯é€šå¸¸ç”±ä»¥ä¸‹åŸå› å¯¼è‡´ï¼š

1. **æ„å»ºä¸å®Œæ•´**ï¼šæ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™ï¼ŒæŸäº›æ–‡ä»¶æœªç”Ÿæˆ
2. **éƒ¨ç½²ä¸å®Œæ•´**ï¼šæ–‡ä»¶æœªæ­£ç¡®å¤åˆ¶åˆ°æœåŠ¡å™¨
3. **è·¯å¾„é…ç½®é”™è¯¯**ï¼šèµ„æºè·¯å¾„é…ç½®ä¸æ­£ç¡®
4. **ç¼“å­˜é—®é¢˜**ï¼šæµè§ˆå™¨æˆ–æœåŠ¡å™¨ç¼“å­˜äº†æ—§ç‰ˆæœ¬

### âœ… è§£å†³æ–¹æ¡ˆ

#### 1. æ„å»ºéªŒè¯

æ¯æ¬¡æ„å»ºåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿è¡ŒéªŒè¯è„šæœ¬ï¼š

```bash
npm run build
# ä¼šè‡ªåŠ¨è¿è¡Œ: vite build && node scripts/verify-build.js
```

éªŒè¯è„šæœ¬ä¼šæ£€æŸ¥ï¼š
- âœ… `dist/index.html` æ˜¯å¦å­˜åœ¨
- âœ… `dist/assets/` ç›®å½•æ˜¯å¦å­˜åœ¨
- âœ… æ‰€æœ‰å¼•ç”¨çš„ JS æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ… æ–‡ä»¶å¤§å°æ˜¯å¦æ­£å¸¸ï¼ˆä¸ä¸ºç©ºï¼‰

å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ„å»ºä¼šä¸­æ–­å¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚

#### 2. éƒ¨ç½²éªŒè¯

éƒ¨ç½²è„šæœ¬å·²æ”¹è¿›ï¼ŒåŒ…å«ä»¥ä¸‹éªŒè¯æ­¥éª¤ï¼š

```bash
# éªŒè¯æ„å»ºç»“æœ
if [ ! -d "dist/assets" ] || [ -z "$(ls -A dist/assets/*.js 2>/dev/null)" ]; then
  echo "âŒ æ„å»ºå¤±è´¥ï¼šassets ç›®å½•ä¸ºç©ºæˆ–æ²¡æœ‰ JS æ–‡ä»¶"
  exit 1
fi

# éªŒè¯éƒ¨ç½²ç»“æœ
if [ ! -f "/var/www/html/index.html" ] || [ -z "$(ls -A /var/www/html/assets/*.js 2>/dev/null)" ]; then
  echo "âŒ éƒ¨ç½²å¤±è´¥ï¼šæ–‡ä»¶æœªæ­£ç¡®å¤åˆ¶"
  exit 1
fi
```

#### 3. æ‰‹åŠ¨éªŒè¯

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡ŒéªŒè¯ï¼š

```bash
# éªŒè¯æœ¬åœ°æ„å»º
npm run verify-build

# éªŒè¯æœåŠ¡å™¨éƒ¨ç½²ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼‰
bash scripts/verify-deployment.sh /var/www/html
```

#### 4. æ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²å‰ï¼Œç¡®ä¿ï¼š

- [ ] æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼š`npm ci`
- [ ] æ„å»ºæˆåŠŸï¼š`npm run build` æ— é”™è¯¯
- [ ] éªŒè¯é€šè¿‡ï¼š`npm run verify-build` æˆåŠŸ
- [ ] æœåŠ¡å™¨ç›®å½•å­˜åœ¨ï¼š`/var/www/html` å’Œ `/var/www/html/assets`
- [ ] æ–‡ä»¶æƒé™æ­£ç¡®ï¼šnginx ç”¨æˆ·å¯ä»¥è¯»å–æ–‡ä»¶

### ğŸ› ï¸ æ•…éšœæ’æŸ¥æ­¥éª¤

1. **æ£€æŸ¥æ„å»ºè¾“å‡º**
   ```bash
   ls -la dist/assets/
   # åº”è¯¥çœ‹åˆ°æ‰€æœ‰ .js æ–‡ä»¶
   ```

2. **æ£€æŸ¥ index.html ä¸­çš„å¼•ç”¨**
   ```bash
   grep -o 'src="[^"]*\.js"' dist/index.html
   # åº”è¯¥çœ‹åˆ°æ‰€æœ‰å¼•ç”¨çš„ JS æ–‡ä»¶
   ```

3. **éªŒè¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   ls -la /var/www/html/assets/DriverManagement*.js
   # å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯´æ˜éƒ¨ç½²æœ‰é—®é¢˜
   ```

4. **æ£€æŸ¥ nginx é…ç½®**
   ```nginx
   # ç¡®ä¿é™æ€èµ„æºæ­£ç¡®é…ç½®
   location /assets/ {
       alias /var/www/html/assets/;
       expires 1y;
       add_header Cache-Control "public, immutable";
   }
   ```

5. **æ¸…é™¤ç¼“å­˜**
   ```bash
   # æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
   # ç¡¬åˆ·æ–°ï¼šCtrl+Shift+R (Windows) æˆ– Cmd+Shift+R (Mac)
   
   # æ¸…é™¤æœåŠ¡å™¨ç¼“å­˜ï¼ˆå¦‚æœä½¿ç”¨ CDNï¼‰
   # æ ¹æ®ä½ çš„ CDN æä¾›å•†æ“ä½œ
   ```

### ğŸ“ é¢„é˜²æªæ–½

1. **ä½¿ç”¨æ„å»ºéªŒè¯**ï¼šæ¯æ¬¡æ„å»ºåè‡ªåŠ¨éªŒè¯
2. **ä½¿ç”¨éƒ¨ç½²éªŒè¯**ï¼šéƒ¨ç½²åéªŒè¯æ–‡ä»¶å®Œæ•´æ€§
3. **ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶**ï¼šç¡®ä¿æ„å»ºäº§ç‰©è¢«æ­£ç¡®è·Ÿè¸ª
4. **ä½¿ç”¨ CI/CD**ï¼šè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²æµç¨‹
5. **ç›‘æ§é”™è¯¯æ—¥å¿—**ï¼šä½¿ç”¨å‰ç«¯é”™è¯¯æ—¥å¿—ç³»ç»Ÿç›‘æ§é—®é¢˜

### ğŸ”— ç›¸å…³æ–‡ä»¶

- `scripts/verify-build.js` - æ„å»ºéªŒè¯è„šæœ¬
- `scripts/verify-deployment.sh` - éƒ¨ç½²éªŒè¯è„šæœ¬
- `package.json` - æ„å»ºè„šæœ¬é…ç½®
- `.github/workflows/deploy.yml` - CI/CD é…ç½®

