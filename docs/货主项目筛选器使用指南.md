# è´§ä¸»-é¡¹ç›®çº§è”ç­›é€‰å™¨ä½¿ç”¨æŒ‡å—

## ğŸ“¦ ç»„ä»¶è¯´æ˜

**æ–‡ä»¶**ï¼š`src/components/ShipperProjectCascadeFilter.tsx`

**åŠŸèƒ½**ï¼š
- æ ‘å½¢å±•ç¤ºè´§ä¸»å±‚çº§å…³ç³»
- é€‰æ‹©è´§ä¸»åè‡ªåŠ¨æ˜¾ç¤ºå…³è”é¡¹ç›®
- çº§è”ç­›é€‰ï¼Œé€‚ç”¨äºå¤šä¸ªä¸šåŠ¡åœºæ™¯

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯¼å…¥ç»„ä»¶

```tsx
import { ShipperProjectCascadeFilter } from '@/components/ShipperProjectCascadeFilter';
import { useState } from 'react';
```

### 2. æ·»åŠ çŠ¶æ€

```tsx
const [selectedShipperId, setSelectedShipperId] = useState('all');
const [selectedProjectId, setSelectedProjectId] = useState('all');
```

### 3. ä½¿ç”¨ç»„ä»¶

```tsx
<ShipperProjectCascadeFilter
  selectedShipperId={selectedShipperId}
  selectedProjectId={selectedProjectId}
  onShipperChange={setSelectedShipperId}
  onProjectChange={setSelectedProjectId}
/>
```

---

## ğŸ“‹ å®Œæ•´ç¤ºä¾‹

### å¯¹è´¦ç®¡ç†é¡µé¢ç¤ºä¾‹

```tsx
import { useState, useEffect } from 'react';
import { ShipperProjectCascadeFilter } from '@/components/ShipperProjectCascadeFilter';
import { supabase } from '@/integrations/supabase/client';

export default function ReconciliationPage() {
  const [selectedShipperId, setSelectedShipperId] = useState('all');
  const [selectedProjectId, setSelectedProjectId] = useState('all');
  const [records, setRecords] = useState([]);

  // æ ¹æ®ç­›é€‰æ¡ä»¶åŠ è½½æ•°æ®
  useEffect(() => {
    const loadRecords = async () => {
      let query = supabase
        .from('logistics_records')
        .select('*');

      // æ ¹æ®è´§ä¸»ç­›é€‰
      if (selectedShipperId !== 'all') {
        query = query.eq('shipper_id', selectedShipperId);
      }

      // æ ¹æ®é¡¹ç›®ç­›é€‰
      if (selectedProjectId !== 'all') {
        query = query.eq('project_id', selectedProjectId);
      }

      const { data } = await query;
      setRecords(data || []);
    };

    loadRecords();
  }, [selectedShipperId, selectedProjectId]);

  return (
    <div className="space-y-6">
      {/* ç­›é€‰å™¨ */}
      <Card>
        <CardContent className="pt-6">
          <ShipperProjectCascadeFilter
            selectedShipperId={selectedShipperId}
            selectedProjectId={selectedProjectId}
            onShipperChange={setSelectedShipperId}
            onProjectChange={setSelectedProjectId}
          />
        </CardContent>
      </Card>

      {/* æ•°æ®å±•ç¤º */}
      <Card>
        <CardHeader>
          <CardTitle>å¯¹è´¦è®°å½• ({records.length})</CardTitle>
        </CardHeader>
        <CardContent>
          {/* ä½ çš„æ•°æ®è¡¨æ ¼ */}
        </CardContent>
      </Card>
    </div>
  );
}
```

---

## ğŸ¨ è‡ªå®šä¹‰æ ·å¼

### æ·»åŠ èƒŒæ™¯è‰²

```tsx
<ShipperProjectCascadeFilter
  className="bg-blue-50 p-4 rounded-lg"
  ...
/>
```

### åµŒå…¥åˆ°ç­›é€‰å¡ç‰‡ä¸­

```tsx
<Card>
  <CardHeader>
    <CardTitle>é«˜çº§ç­›é€‰</CardTitle>
  </CardHeader>
  <CardContent>
    <ShipperProjectCascadeFilter ... />
    
    {/* å…¶ä»–ç­›é€‰æ¡ä»¶ */}
    <div className="mt-4">
      <Label>æ—¥æœŸèŒƒå›´</Label>
      <DateRangePicker ... />
    </div>
  </CardContent>
</Card>
```

---

## ğŸ“Š é€‚ç”¨é¡µé¢

### å»ºè®®ä½¿ç”¨æ­¤ç»„ä»¶çš„é¡µé¢

1. âœ… **å¯¹è´¦ç®¡ç†** (`/finance/reconciliation`)
2. âœ… **è´¢åŠ¡çœ‹æ¿** (`/dashboard/financial`)
3. âœ… **è´§ä¸»çœ‹æ¿** (`/dashboard/shipper`)
4. âœ… **ä»˜æ¬¾ç”³è¯·åˆ—è¡¨** (`/payment-requests-list`)
5. âœ… **å¼€ç¥¨ç”³è¯·ç®¡ç†** (`/invoice-request-management`)

---

## ğŸ”§ ç»„ä»¶å±æ€§

| å±æ€§ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `selectedShipperId` | string | âœ… | å½“å‰é€‰ä¸­çš„è´§ä¸»ID |
| `selectedProjectId` | string | âœ… | å½“å‰é€‰ä¸­çš„é¡¹ç›®ID |
| `onShipperChange` | function | âœ… | è´§ä¸»å˜åŒ–å›è°ƒ |
| `onProjectChange` | function | âœ… | é¡¹ç›®å˜åŒ–å›è°ƒ |
| `className` | string | âŒ | è‡ªå®šä¹‰æ ·å¼ç±»å |

---

## âœ… ä¼˜åŠ¿

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸŒ³ æ ‘å½¢å±•ç¤º | æ”¯æŒæ— é™å±‚çº§è´§ä¸» |
| ğŸ”— çº§è”è”åŠ¨ | é€‰è´§ä¸»è‡ªåŠ¨æ›´æ–°é¡¹ç›® |
| â™»ï¸ å¯å¤ç”¨ | å¤šé¡µé¢å…±äº«ä¸€ä¸ªç»„ä»¶ |
| ğŸ“± å“åº”å¼ | PC/ç§»åŠ¨ç«¯è‡ªé€‚åº” |
| ğŸ¨ ç¾è§‚ | ç¬¦åˆç³»ç»Ÿè®¾è®¡é£æ ¼ |
| âš¡ é«˜æ€§èƒ½ | æ•°æ®ç¼“å­˜ï¼Œé¿å…é‡å¤æŸ¥è¯¢ |

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0  
**åˆ›å»ºæ—¶é—´**ï¼š2025-11-03

