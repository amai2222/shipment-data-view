# 运输单据PDF生成功能使用说明

## 功能概述
在运单管理页面新增了**运输单据**按钮，点击后可以生成PDF格式的运输单据，支持打印功能。

## 使用方法

### 1. 访问运单管理页面
- 导航到：业务管理 → 运单管理

### 2. 生成运输单据
- 在运单列表中找到要生成单据的记录
- 点击该记录右侧的"更多操作"按钮（三个点图标）
- 在下拉菜单中选择"运输单据"
- 系统会自动生成PDF并打开打印预览

### 3. 打印或保存
- 在打印预览窗口中可以选择：
  - **打印** - 直接打印到打印机
  - **保存为PDF** - 保存到本地文件
  - **发送邮件** - 通过邮件发送

## 单据内容

### 基础信息
- 客户名称
- 运输单号
- 所属订单
- 运输线路
- 车辆信息
- 司机信息
- 货物名称

### 装货信息
- 发货地址
- 装货时间
- 装货吨数
- 装货磅单

### 卸货信息
- 收货地址
- 卸货时间
- 卸货吨数
- 卸货磅单

### 其他功能
- 运输单号条形码（可扫码）
- 生成时间
- 法律效力说明

## 技术特点
- ✅ **无外部依赖** - 使用浏览器原生打印功能
- ✅ **响应式设计** - 适配不同屏幕尺寸
- ✅ **打印优化** - 专门的打印样式
- ✅ **错误处理** - 完善的错误处理机制
- ✅ **A4纸张** - 标准A4纸张尺寸
- ✅ **打印边距** - 20mm标准边距

## 文件结构
```
src/
├── components/
│   └── TransportDocumentGenerator.tsx  # PDF生成组件
├── pages/BusinessEntry/
│   ├── index.tsx                       # 运单管理主页面
│   └── components/
│       └── LogisticsTable.tsx          # 运单表格组件
└── pages/
    └── TestPDFGeneration.tsx          # 测试页面
```

## 测试方法
1. 访问测试页面：`/test-pdf-generation`
2. 点击"测试生成运输单据PDF"按钮
3. 验证PDF生成和打印功能

## 注意事项
1. **浏览器兼容性** - 支持现代浏览器（Chrome、Firefox、Safari、Edge）
2. **打印设置** - 建议使用A4纸张，边距设置为20mm
3. **数据完整性** - 确保运单记录数据完整，避免显示"未知"
4. **条形码功能** - 当前使用简单条形码，后续可集成专业条形码库

## 后续优化计划
- 🔄 **专业条形码** - 集成专业条形码生成库
- 🔄 **磅单图片** - 支持显示实际磅单图片
- 🔄 **电子签名** - 添加电子签名功能
- 🔄 **批量生成** - 支持批量生成多个运单的运输单据
- 🔄 **模板定制** - 支持自定义运输单据模板
