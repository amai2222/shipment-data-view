# 按钮样式修改说明

## 🎯 **修改目标**

根据用户要求，对申请单管理页面的按钮样式和显示逻辑进行以下修改：

1. **生成PDF** → **查看申请单** + 蓝色背景
2. **付款按钮** → 只在已审批状态下显示
3. **隐藏企业微信审批按钮**
4. **审批按钮** → 蓝色背景
5. **导出按钮** → 取消颜色背景

## 🔧 **修改内容**

### **1. 生成PDF按钮修改**

#### **修改前：**
```typescript
<Button 
  variant="outline" 
  size="sm" 
  onClick={(e) => handleGeneratePDF(e, req)} 
  disabled={exportingId === req.id}
  className="border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm transition-all duration-200"
>
  <FileText className="mr-2 h-4 w-4" />
  生成PDF
</Button>
```

#### **修改后：**
```typescript
<Button 
  variant="default" 
  size="sm" 
  onClick={(e) => handleGeneratePDF(e, req)} 
  disabled={exportingId === req.id}
  className="bg-blue-600 hover:bg-blue-700 text-white border-0 shadow-sm transition-all duration-200"
>
  <FileText className="mr-2 h-4 w-4" />
  查看申请单
</Button>
```

**变化：**
- 按钮文本：`生成PDF` → `查看申请单`
- 按钮样式：`variant="outline"` → `variant="default"`
- 背景颜色：灰色边框 → 蓝色实心
- 文字颜色：灰色 → 白色

### **2. 导出按钮修改**

#### **修改前：**
```typescript
<Button 
  variant="default" 
  size="sm" 
  onClick={(e) => handleExport(e, req)} 
  disabled={exportingId === req.id}
  className="bg-blue-600 hover:bg-blue-700 text-white border-0 shadow-sm transition-all duration-200"
>
  {exportingId === req.id ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <FileSpreadsheet className="mr-2 h-4 w-4" />}
  导出
</Button>
```

#### **修改后：**
```typescript
<Button 
  variant="outline" 
  size="sm" 
  onClick={(e) => handleExport(e, req)} 
  disabled={exportingId === req.id}
  className="border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm transition-all duration-200"
>
  {exportingId === req.id ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <FileSpreadsheet className="mr-2 h-4 w-4" />}
  导出
</Button>
```

**变化：**
- 按钮样式：`variant="default"` → `variant="outline"`
- 背景颜色：蓝色实心 → 灰色边框
- 文字颜色：白色 → 灰色

### **3. 审批按钮修改**

#### **修改前：**
```typescript
<Button 
  variant="default" 
  size="sm" 
  onClick={(e) => handleApproval(e, req)} 
  disabled={exportingId === req.id}
  className="bg-green-600 hover:bg-green-700 text-white border-0 shadow-sm font-medium transition-all duration-200"
>
  <ClipboardList className="mr-2 h-4 w-4" />
  审批
</Button>
```

#### **修改后：**
```typescript
<Button 
  variant="default" 
  size="sm" 
  onClick={(e) => handleApproval(e, req)} 
  disabled={exportingId === req.id}
  className="bg-blue-600 hover:bg-blue-700 text-white border-0 shadow-sm font-medium transition-all duration-200"
>
  <ClipboardList className="mr-2 h-4 w-4" />
  审批
</Button>
```

**变化：**
- 背景颜色：绿色 → 蓝色
- 悬停颜色：绿色 → 蓝色

### **4. 企业微信审批按钮隐藏**

#### **修改前：**
```typescript
{req.status === 'Pending' && (
  <div onClick={(e) => e.stopPropagation()}>
    <PaymentApproval
      paymentRequestId={req.id}
      amount={partnerTotals.reduce((sum, pt) => sum + pt.total_amount, 0)}
      description={`付款申请单 ${req.request_id} - ${req.record_count} 条运单`}
      onApprovalSubmitted={() => {
        fetchPaymentRequests();
        toast({ title: "提交成功", description: "企业微信审批已提交" });
      }}
    />
  </div>
)}
```

#### **修改后：**
```typescript
{/* 隐藏企业微信审批按钮 */}
{/* {req.status === 'Pending' && (
  <div onClick={(e) => e.stopPropagation()}>
    <PaymentApproval
      paymentRequestId={req.id}
      amount={partnerTotals.reduce((sum, pt) => sum + pt.total_amount, 0)}
      description={`付款申请单 ${req.request_id} - ${req.record_count} 条运单`}
      onApprovalSubmitted={() => {
        fetchPaymentRequests();
        toast({ title: "提交成功", description: "企业微信审批已提交" });
      }}
    />
  </div>
)} */}
```

**变化：**
- 按钮状态：显示 → 隐藏（注释掉）
- 功能影响：企业微信审批功能暂时不可用

### **5. 付款按钮显示逻辑**

#### **保持现有逻辑：**
```typescript
{req.status === 'Approved' && (
  <Button 
    variant="default" 
    size="sm" 
    onClick={(e) => handlePayment(e, req)} 
    disabled={exportingId === req.id}
    className="bg-red-600 hover:bg-red-700 text-white border-0 shadow-sm font-medium transition-all duration-200"
  >
    <Banknote className="mr-2 h-4 w-4" />
    付款
  </Button>
)}
```

**确认：**
- 付款按钮只在 `req.status === 'Approved'` 状态下显示
- 按钮样式保持红色主题
- 功能逻辑保持不变

## 📋 **修改后的按钮状态表**

| 申请单状态 | 显示按钮 | 按钮样式 | 功能说明 |
|------------|----------|----------|----------|
| `Pending` | 导出、查看申请单、审批 | 灰色边框、蓝色实心、蓝色实心 | 待审批状态 |
| `Approved` | 导出、查看申请单、付款、取消审批 | 灰色边框、蓝色实心、红色实心、灰色边框 | 已审批状态 |
| `Paid` | 导出、查看申请单、取消付款 | 灰色边框、蓝色实心、橙色边框 | 已付款状态 |
| `Rejected` | 导出、查看申请单 | 灰色边框、蓝色实心 | 已驳回状态 |

## 🎨 **颜色主题更新**

### **新的颜色分配：**
- **蓝色主题**：查看申请单、审批（主要操作）
- **红色主题**：付款（重要操作）
- **橙色主题**：取消付款（警告操作）
- **灰色主题**：导出、取消审批（辅助操作）

### **视觉层次调整：**
- **主要操作**：蓝色实心按钮（查看申请单、审批）
- **重要操作**：红色实心按钮（付款）
- **警告操作**：橙色边框按钮（取消付款）
- **辅助操作**：灰色边框按钮（导出、取消审批）

## 📱 **桌面端和移动端一致性**

### **修改范围：**
- ✅ 桌面端：`src/pages/PaymentRequestsList.tsx`
- ✅ 移动端：`src/pages/mobile/MobilePaymentRequestsList.tsx`

### **保持一致：**
- 按钮文本修改
- 按钮样式修改
- 显示逻辑修改
- 颜色主题修改

## ✅ **修改完成状态**

### **已完成的修改：**
- ✅ 生成PDF → 查看申请单 + 蓝色背景
- ✅ 付款按钮只在已审批状态下显示
- ✅ 隐藏企业微信审批按钮
- ✅ 审批按钮设置为蓝色背景
- ✅ 导出按钮取消颜色背景

### **功能验证：**
- ✅ 桌面端按钮样式正确
- ✅ 移动端按钮样式正确
- ✅ 按钮显示逻辑正确
- ✅ 颜色主题统一
- ✅ 代码质量检查通过

## 🎯 **用户体验提升**

### **操作流程优化：**
1. **查看申请单**：蓝色按钮，突出主要功能
2. **审批操作**：蓝色按钮，与查看申请单保持一致
3. **付款操作**：红色按钮，警示重要操作
4. **导出功能**：灰色按钮，低调辅助功能

### **视觉识别改进：**
- **功能识别**：颜色快速识别功能类型
- **优先级识别**：视觉层次清晰
- **状态识别**：按钮状态一目了然

## 📈 **总结**

按钮样式修改已完成，实现了以下目标：
- 查看申请单功能更加突出（蓝色主题）
- 审批操作更加醒目（蓝色主题）
- 导出功能更加低调（灰色主题）
- 企业微信审批功能暂时隐藏
- 付款按钮显示逻辑保持不变

修改涉及桌面端和移动端两个页面，确保功能的一致性和用户体验的统一性。

---

**修改人**：AI Assistant  
**修改时间**：2025-01-22  
**修改状态**：✅ 完成  
**测试状态**：✅ 通过
