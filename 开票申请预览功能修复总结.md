# å¼€ç¥¨ç”³è¯·é¢„è§ˆåŠŸèƒ½ä¿®å¤æ€»ç»“

## ğŸ¯ **é—®é¢˜åˆ†æ**

### å‘ç°çš„é—®é¢˜
1. **é”™è¯¯çš„ç­›é€‰é€»è¾‘**: å¼€ç¥¨ç”³è¯·é¢„è§ˆä½¿ç”¨äº† `cost.level < maxLevel`ï¼Œåº”è¯¥ä½¿ç”¨ `cost.level === maxLevel`
2. **ç¼ºå°‘è¿å•æ˜ç»†**: é¢„è§ˆå¯¹è¯æ¡†åªæ˜¾ç¤ºåˆä½œæ–¹æ±‡æ€»ï¼Œæ²¡æœ‰æ˜¾ç¤ºå…·ä½“çš„è¿å•æ˜ç»†
3. **ä¸šåŠ¡é€»è¾‘é”™è¯¯**: å¼€ç¥¨åº”è¯¥åªå¯¹æœ€é«˜çº§åˆä½œæ–¹ï¼Œè€Œä¸æ˜¯éæœ€é«˜çº§åˆä½œæ–¹

## ğŸ”§ **ä¿®å¤å†…å®¹**

### 1. **ä¿®å¤ç­›é€‰é€»è¾‘**

#### **ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰**
```typescript
if (cost.level < maxLevel && (!cost.invoice_status || cost.invoice_status === 'Uninvoiced')) {
```

#### **ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰**
```typescript
if (cost.level === maxLevel && (!cost.invoice_status || cost.invoice_status === 'Uninvoiced')) {
```

### 2. **æ·»åŠ è¿å•æ˜ç»†æ˜¾ç¤º**

#### **æ–°å¢è¿å•æ˜ç»†è¡¨æ ¼**
```typescript
{/* è¿å•æ˜ç»† */}
<CardContent>
  <div className="space-y-4">
    <h4 className="font-medium text-sm text-muted-foreground">è¿å•æ˜ç»†</h4>
    <div className="rounded-md border">
      <Table>
        <TableHeader>
          <TableRow>
            <TableHead>è¿å•å·</TableHead>
            <TableHead>é¡¹ç›®</TableHead>
            <TableHead>å¸æœº</TableHead>
            <TableHead>è·¯çº¿</TableHead>
            <TableHead>è£…è´§æ—¥æœŸ</TableHead>
            <TableHead>å¼€ç¥¨é‡‘é¢</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {sheet.records.map((record) => (
            <TableRow key={record.id}>
              <TableCell className="font-mono text-sm">
                {record.auto_number}
              </TableCell>
              <TableCell className="text-sm">
                {record.project_name}
              </TableCell>
              <TableCell className="text-sm">
                {record.driver_name}
              </TableCell>
              <TableCell className="text-sm">
                {record.loading_location} â†’ {record.unloading_location}
              </TableCell>
              <TableCell className="text-sm">
                {record.loading_date}
              </TableCell>
              <TableCell className="text-sm font-mono">
                {formatCurrency(record.total_invoiceable_for_partner || 0)}
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  </div>
</CardContent>
```

## ğŸ“Š **ä¸šåŠ¡é€»è¾‘è¯´æ˜**

### å¼€ç¥¨ç”³è¯·çš„æ­£ç¡®é€»è¾‘

#### **åˆä½œæ–¹çº§åˆ«ç»“æ„**
```
é¡¹ç›® â†’ ä¸€çº§åˆä½œæ–¹ï¼ˆlevel=1ï¼‰
     â†’ äºŒçº§åˆä½œæ–¹ï¼ˆlevel=2ï¼‰  
     â†’ ä¸‰çº§åˆä½œæ–¹ï¼ˆlevel=3ï¼‰â† æœ€é«˜çº§
```

#### **å¼€ç¥¨æ–¹å‘**
- âœ… **å¼€ç¥¨ç»™æœ€é«˜çº§åˆä½œæ–¹**: `level === maxLevel`
- âŒ **ä¸å¼€ç¥¨ç»™éæœ€é«˜çº§åˆä½œæ–¹**: `level < maxLevel`

#### **ä¸šåŠ¡å«ä¹‰**
- **æœ€é«˜çº§åˆä½œæ–¹**: æœ€ç»ˆå®¢æˆ·ï¼Œéœ€è¦å‘ä»–ä»¬å¼€ç¥¨æ”¶æ¬¾
- **éæœ€é«˜çº§åˆä½œæ–¹**: ä¸­é—´å•†ï¼Œæˆ‘ä»¬å‘ä»–ä»¬ä»˜æ¬¾

## ğŸ¨ **UIæ”¹è¿›**

### 1. **é¢„è§ˆå¯¹è¯æ¡†ç»“æ„**
```
å¼€ç¥¨ç”³è¯·é¢„è§ˆ
â”œâ”€ åˆä½œæ–¹1
â”‚  â”œâ”€ åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€è¿å•æ•°é‡ã€å¼€ç¥¨é‡‘é¢ï¼‰
â”‚  â””â”€ è¿å•æ˜ç»†è¡¨æ ¼
â”‚      â”œâ”€ è¿å•å·
â”‚      â”œâ”€ é¡¹ç›®
â”‚      â”œâ”€ å¸æœº
â”‚      â”œâ”€ è·¯çº¿
â”‚      â”œâ”€ è£…è´§æ—¥æœŸ
â”‚      â””â”€ å¼€ç¥¨é‡‘é¢
â”œâ”€ åˆä½œæ–¹2
â”‚  â””â”€ ...
â””â”€ æ€»è®¡ä¿¡æ¯
```

### 2. **è¿å•æ˜ç»†è¡¨æ ¼å­—æ®µ**
- **è¿å•å·**: æ˜¾ç¤ºè¿å•ç¼–å·
- **é¡¹ç›®**: æ˜¾ç¤ºé¡¹ç›®åç§°
- **å¸æœº**: æ˜¾ç¤ºå¸æœºå§“å
- **è·¯çº¿**: æ˜¾ç¤ºè£…è´§åœ°ç‚¹ â†’ å¸è´§åœ°ç‚¹
- **è£…è´§æ—¥æœŸ**: æ˜¾ç¤ºè£…è´§æ—¥æœŸ
- **å¼€ç¥¨é‡‘é¢**: æ˜¾ç¤ºè¯¥è¿å•å¯¹å½“å‰åˆä½œæ–¹çš„å¼€ç¥¨é‡‘é¢

## âœ… **ä¿®å¤æ•ˆæœ**

### 1. **æ­£ç¡®çš„ä¸šåŠ¡é€»è¾‘**
- âœ… åªå¯¹æœ€é«˜çº§åˆä½œæ–¹ç”Ÿæˆå¼€ç¥¨ç”³è¯·
- âœ… ç¬¦åˆå¼€ç¥¨ä¸šåŠ¡è§„åˆ™
- âœ… ä¸ä»˜æ¬¾ç”³è¯·é€»è¾‘å½¢æˆæ­£ç¡®çš„åå‘å…³ç³»

### 2. **å®Œæ•´çš„é¢„è§ˆä¿¡æ¯**
- âœ… æ˜¾ç¤ºåˆä½œæ–¹æ±‡æ€»ä¿¡æ¯
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„è¿å•æ˜ç»†
- âœ… æä¾›å®Œæ•´çš„å¼€ç¥¨ç”³è¯·é¢„è§ˆ

### 3. **ç”¨æˆ·ä½“éªŒæå‡**
- âœ… æ¸…æ™°çš„è¿å•æ˜ç»†å±•ç¤º
- âœ… å®Œæ•´çš„å¼€ç¥¨ç”³è¯·ä¿¡æ¯
- âœ… ä¾¿äºç”¨æˆ·ç¡®è®¤å’Œå®¡æ ¸

## ğŸš€ **æ€»ç»“**

å¼€ç¥¨ç”³è¯·é¢„è§ˆåŠŸèƒ½å·²æˆåŠŸä¿®å¤ï¼š

1. **ä¿®å¤äº†ç­›é€‰é€»è¾‘**: ä» `level < maxLevel` æ”¹ä¸º `level === maxLevel`
2. **æ·»åŠ äº†è¿å•æ˜ç»†**: åœ¨é¢„è§ˆå¯¹è¯æ¡†ä¸­æ˜¾ç¤ºè¯¦ç»†çš„è¿å•ä¿¡æ¯
3. **ç¬¦åˆä¸šåŠ¡è§„åˆ™**: åªå¯¹æœ€é«˜çº§åˆä½œæ–¹ç”Ÿæˆå¼€ç¥¨ç”³è¯·

ç°åœ¨å¼€ç¥¨ç”³è¯·é¢„è§ˆåŠŸèƒ½å®Œå…¨ç¬¦åˆä¸šåŠ¡é€»è¾‘ï¼Œå¹¶æä¾›å®Œæ•´çš„é¢„è§ˆä¿¡æ¯ï¼ğŸ‰
